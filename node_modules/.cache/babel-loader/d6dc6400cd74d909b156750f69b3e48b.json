{"ast":null,"code":"import _objectSpread from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./FormUsageKWH.css\";// Icons\nimport{IconContext}from\"react-icons\";import{IoMdArrowDropleft,IoMdArrowDropright}from'react-icons/io';// Components\nimport FormScript from'../../FormScript/FormScript';import FormAssistant from\"../../FormAssistant/FormAssistant\";import Error from'../../../Error/Error';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function FormUsageKWH(_ref){var customerInformation=_ref.customerInformation,progressBar=_ref.progressBar,showScript=_ref.showScript,updateAvgElec=_ref.updateAvgElec,updateCustomerInformation=_ref.updateCustomerInformation,updateShowFormUsageKWH=_ref.updateShowFormUsageKWH,updateShowFormUsageGAS=_ref.updateShowFormUsageGAS,updateShowFormUsageGBP_es=_ref.updateShowFormUsageGBP_es,updateShowFormDebt=_ref.updateShowFormDebt,updateShowFormTariffs=_ref.updateShowFormTariffs,updateShowE7=_ref.updateShowE7,updateProgressBar=_ref.updateProgressBar,updateShowOverlay=_ref.updateShowOverlay;/* STATES */var _useState=useState(false),_useState2=_slicedToArray(_useState,2),idk_active=_useState2[0],update_idk_active=_useState2[1];// Error State\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],updateError=_useState4[1];var _useState5=useState({message:''}),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];/* FUNCTIONS */ // Scroll to top & hide overlay\nuseEffect(function(){window.scrollTo({top:0,behavior:'smooth'});// Show overlay\nupdateShowOverlay(false);},[]);// Variables\nvar dual_active=customerInformation.fuel_description.dual_active;// Handle Click - idk\nvar handleClick=function handleClick(e){e.preventDefault();// Update Error\nupdateError(false);// Update state\nupdate_idk_active(!idk_active);var usage_kwh_description={usage_kwh_entered:false,usage_kwh_expended:false,usage_kwh_period:false};// Update state\nupdateCustomerInformation(_objectSpread(_objectSpread({},customerInformation),{},{usage_kwh_description:usage_kwh_description}));};// Handle Change - Input\nvar handleChange=function handleChange(e){// Update Error\nupdateError(false);var usage_select=document.getElementById('usage_select').value;var usage_kwh_description={usage_kwh_entered:true,usage_kwh_expended:e.target.value.replace(/[^0-9\\.]+/g,'').trim(),usage_kwh_period:usage_select};// Update state\nupdateCustomerInformation(_objectSpread(_objectSpread({},customerInformation),{},{usage_kwh_description:usage_kwh_description}));};// Initial Values - Inputs\nvar value_kwh='';if(value_kwh){value_kwh=customerInformation.usage_kwh_description.usage_kwh_expended;}// Send usage\nvar sendUsage=function sendUsage(e){e.preventDefault();// Validation\nvar usage_value=document.getElementById('usage_kwh_id').value;var usage_kwh_period=document.getElementById('usage_select').value;// Validation\nif(parseFloat(usage_value)>50000&&usage_kwh_period==='annu'||parseFloat(usage_value)>4166.666&&usage_kwh_period==='mo'){var amount='';var period='';// Amount & period\nif(usage_kwh_period==='annu'){amount=50000;period='year';}else{amount=4166.666;period='month';}// Set error message\nsetErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:\"Please check how much you use on electricity. If you use more than \".concat(amount.toFixed(2),\" kWh per \").concat(period,\" we can't compare this against domestic consumption tariffs.\")}));// Show error\nupdateError(true);return;}if(usage_value===''){// Set error message\nsetErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:\"Please introduce a valid usage\"}));// Update Error\nupdateError(true);return;}else{var usage_kwh_entered=customerInformation.usage_kwh_description.usage_kwh_entered;var usage_kwh_expended=customerInformation.usage_kwh_description.usage_kwh_expended;// Update State\nupdateAvgElec(false);// View conditional\nif(usage_kwh_entered===false){// Hidde Form Usage\nupdateShowFormUsageKWH(false);// Show FormUsageGBP_es\nupdateShowFormUsageGBP_es(true);console.log('Show UsageGBP_es');}else{// Update state\nupdateCustomerInformation(_objectSpread(_objectSpread({},customerInformation),{},{usage_kwh_description:{usage_kwh_entered:usage_kwh_entered,usage_kwh_expended:usage_kwh_expended,usage_kwh_period:usage_kwh_period}}));// Conditional view controller - Form compare / Gas section\nif(dual_active){// Show Form Usage Gas\nconsole.log('Show Form Usage Gas');// Hidde Form Usage KWH\nupdateShowFormUsageKWH(false);// Show Form Usage Gas\nupdateShowFormUsageGAS(true);}else{// Hidde Form usage\nupdateShowFormUsageKWH(false);// Show Debt\nupdateShowFormDebt(true);// Update Progressbar\nupdateProgressBar(_objectSpread(_objectSpread({},progressBar),{},{step:7}));console.log('Send usage');}}}// Update error\nupdateError(false);};// Go back\nvar goBack=function goBack(e){e.preventDefault();// Delete Customer tariff\nvar copy_customer_tariff=_objectSpread({},customerInformation);delete copy_customer_tariff['tariff_description'];delete copy_customer_tariff['tariff_description_elec'];delete copy_customer_tariff['tariff_description_gas'];delete copy_customer_tariff['usage_kwh_description'];//Update Customer Information\nupdateCustomerInformation(_objectSpread({},copy_customer_tariff));// Hidde Form Usage\nupdateShowFormUsageKWH(false);// Show Form E7\nupdateShowE7(true);// Update progress bar\nupdateProgressBar(_objectSpread(_objectSpread({},progressBar),{},{step:5}));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"section\",{className:\"form-usagekwh-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-usagekwh-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-usagekwh-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-usagekwh\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"How much electricity do you use?\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat aut sint, possimus suscipit hic obcaecati ad necessitatibus eum asperiores maiores in, inventore quidem quibusdam modi. Veniam recusandae maiores voluptatem voluptates?\"})]}),idk_active?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsxs(\"div\",{className:idk_active?\"form-usagekwh-input-container customContainer\":null,children:[/*#__PURE__*/_jsx(\"input\",{id:\"usage_kwh_id\",type:\"text\",name:\"usage_kwh\",onChange:function onChange(e){return handleChange(e);},className:\"form-usagekwh-input\",disabled:true,value:\"I don't know\"}),/*#__PURE__*/_jsx(\"span\",{className:idk_active?\"customSpan\":null,children:\"kWh\"})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-usagekwh-select\",id:\"usage_select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"annu\",children:\"Annually\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mo\",children:\"Monthly\"})]})]})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-usagekwh-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{\"data-cy\":\"kwh-input\",id:\"usage_kwh_id\",type:\"number\",name:\"usage_kwh\",onChange:function onChange(e){return handleChange(e);},className:\"form-usagekwh-input\",defaultValue:value_kwh||''}),/*#__PURE__*/_jsx(\"span\",{children:\"kWh\"})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-usagekwh-select\",id:\"usage_select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"annu\",children:\"Annually\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mo\",children:\"Monthly\"})]})]})}),/*#__PURE__*/_jsx(\"button\",{\"data-cy\":\"kwh-idk\",className:\"form-usagekwh-idk\",onClick:function onClick(e){return handleClick(e);},children:idk_active?\"Enable input\":\"I don't know\"}),error===true?/*#__PURE__*/_jsx(Error,{message:errorMessage.message}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"form-usagekwh-btn-container\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"form-usagekwh-btn btn-back\",onClick:function onClick(e){return goBack(e);},children:[/*#__PURE__*/_jsx(IconContext.Provider,{value:{color:'#D338AE',size:'35px'},children:/*#__PURE__*/_jsx(IoMdArrowDropleft,{className:\"icon-back\"})}),\"Go back\"]}),/*#__PURE__*/_jsxs(\"button\",{\"data-cy\":\"kwh-continue\",className:\"form-usagekwh-btn btn-next\",onClick:function onClick(e){return sendUsage(e);},children:[\"Continue\",/*#__PURE__*/_jsx(IconContext.Provider,{value:{color:'#FFF',size:'35px'},children:/*#__PURE__*/_jsx(IoMdArrowDropright,{className:\"icon-next\"})})]})]})]}),showScript?/*#__PURE__*/_jsxs(\"div\",{className:\"helper-usagekwh\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"script-usagekwh\",children:/*#__PURE__*/_jsx(FormScript,{step:7,use:'kwh'})}),/*#__PURE__*/_jsx(\"div\",{className:\"assistant-usagekwh-custom\",children:/*#__PURE__*/_jsx(FormAssistant,{tips:6})})]}):/*#__PURE__*/_jsx(\"div\",{style:{width:'100%'},children:/*#__PURE__*/_jsx(\"div\",{className:\"assistant-usagekwh\",children:/*#__PURE__*/_jsx(FormAssistant,{tips:6})})})]})})});}export default FormUsageKWH;","map":{"version":3,"sources":["/Users/juanlugo/Desktop/sp-firebase/src/components/FormCards/FormsUsage/FormUsageKWH/FormUsageKWH.jsx"],"names":["React","useState","useEffect","IconContext","IoMdArrowDropleft","IoMdArrowDropright","FormScript","FormAssistant","Error","FormUsageKWH","customerInformation","progressBar","showScript","updateAvgElec","updateCustomerInformation","updateShowFormUsageKWH","updateShowFormUsageGAS","updateShowFormUsageGBP_es","updateShowFormDebt","updateShowFormTariffs","updateShowE7","updateProgressBar","updateShowOverlay","idk_active","update_idk_active","error","updateError","message","errorMessage","setErrorMessage","window","scrollTo","top","behavior","dual_active","fuel_description","handleClick","e","preventDefault","usage_kwh_description","usage_kwh_entered","usage_kwh_expended","usage_kwh_period","handleChange","usage_select","document","getElementById","value","target","replace","trim","value_kwh","sendUsage","usage_value","parseFloat","amount","period","toFixed","console","log","step","goBack","copy_customer_tariff","display","color","size","width"],"mappings":"mTAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,oBAAP,CAEA;AACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,iBAAT,CAA4BC,kBAA5B,KAAsD,gBAAtD,CACA;AACA,MAAOC,CAAAA,UAAP,KAAuB,6BAAvB,CACA,MAAOC,CAAAA,aAAP,KAA0B,mCAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,sBAAlB,C,6IAEA,QAASC,CAAAA,YAAT,MAA4R,IAApQC,CAAAA,mBAAoQ,MAApQA,mBAAoQ,CAA/OC,WAA+O,MAA/OA,WAA+O,CAAlOC,UAAkO,MAAlOA,UAAkO,CAAtNC,aAAsN,MAAtNA,aAAsN,CAAvMC,yBAAuM,MAAvMA,yBAAuM,CAA5KC,sBAA4K,MAA5KA,sBAA4K,CAApJC,sBAAoJ,MAApJA,sBAAoJ,CAA5HC,yBAA4H,MAA5HA,yBAA4H,CAAjGC,kBAAiG,MAAjGA,kBAAiG,CAA7EC,qBAA6E,MAA7EA,qBAA6E,CAAtDC,YAAsD,MAAtDA,YAAsD,CAAxCC,iBAAwC,MAAxCA,iBAAwC,CAArBC,iBAAqB,MAArBA,iBAAqB,CAC1R,YACA,cAAwCrB,QAAQ,CAAC,KAAD,CAAhD,wCAAOsB,UAAP,eAAmBC,iBAAnB,eAEA;AACA,eAA6BvB,QAAQ,CAAC,KAAD,CAArC,yCAAOwB,KAAP,eAAcC,WAAd,eACA,eAAwCzB,QAAQ,CAAC,CAC/C0B,OAAO,CAAE,EADsC,CAAD,CAAhD,yCAAOC,YAAP,eAAqBC,eAArB,eAIA,eAV0R,CAW1R;AACA3B,SAAS,CAAC,UAAM,CACd4B,MAAM,CAACC,QAAP,CAAgB,CAAEC,GAAG,CAAE,CAAP,CAAUC,QAAQ,CAAE,QAApB,CAAhB,EAEA;AACAX,iBAAiB,CAAC,KAAD,CAAjB,CACD,CALQ,CAKN,EALM,CAAT,CAOA;AACA,GAAMY,CAAAA,WAAW,CAAGxB,mBAAmB,CAACyB,gBAApB,CAAqCD,WAAzD,CAEA;AACA,GAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,CAAD,CAAO,CACzBA,CAAC,CAACC,cAAF,GACA;AACAZ,WAAW,CAAC,KAAD,CAAX,CACA;AACAF,iBAAiB,CAAC,CAACD,UAAF,CAAjB,CACA,GAAMgB,CAAAA,qBAAqB,CAAG,CAC5BC,iBAAiB,CAAE,KADS,CAE5BC,kBAAkB,CAAE,KAFQ,CAG5BC,gBAAgB,CAAE,KAHU,CAA9B,CAKA;AACA5B,yBAAyB,gCACpBJ,mBADoB,MAEvB6B,qBAAqB,CAArBA,qBAFuB,GAAzB,CAID,CAhBD,CAkBA;AACA,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACN,CAAD,CAAO,CAC1B;AACAX,WAAW,CAAC,KAAD,CAAX,CACA,GAAMkB,CAAAA,YAAY,CAAGC,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAA7D,CACA,GAAMR,CAAAA,qBAAqB,CAAG,CAC5BC,iBAAiB,CAAE,IADS,CAE5BC,kBAAkB,CAAEJ,CAAC,CAACW,MAAF,CAASD,KAAT,CAAeE,OAAf,CAAuB,YAAvB,CAAqC,EAArC,EAAyCC,IAAzC,EAFQ,CAG5BR,gBAAgB,CAAEE,YAHU,CAA9B,CAKA;AACA9B,yBAAyB,gCACpBJ,mBADoB,MAEvB6B,qBAAqB,CAArBA,qBAFuB,GAAzB,CAID,CAdD,CAgBA;AACA,GAAIY,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAIA,SAAJ,CAAe,CACbA,SAAS,CAAGzC,mBAAmB,CAAC6B,qBAApB,CAA0CE,kBAAtD,CACD,CAED;AACA,GAAMW,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACf,CAAD,CAAO,CACvBA,CAAC,CAACC,cAAF,GACA;AACA,GAAMe,CAAAA,WAAW,CAAGR,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAA5D,CACA,GAAML,CAAAA,gBAAgB,CAAGG,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAjE,CAEA;AACA,GAAMO,UAAU,CAACD,WAAD,CAAV,CAA0B,KAA3B,EAAsCX,gBAAgB,GAAK,MAA5D,EAA0EY,UAAU,CAACD,WAAD,CAAV,CAA0B,QAA3B,EAAyCX,gBAAgB,GAAK,IAA3I,CAAmJ,CACjJ,GAAIa,CAAAA,MAAM,CAAG,EAAb,CACA,GAAIC,CAAAA,MAAM,CAAG,EAAb,CAEA;AACA,GAAId,gBAAgB,GAAK,MAAzB,CAAiC,CAC/Ba,MAAM,CAAG,KAAT,CACAC,MAAM,CAAG,MAAT,CACD,CAHD,IAGO,CACLD,MAAM,CAAG,QAAT,CACAC,MAAM,CAAG,OAAT,CACD,CACD;AACA3B,eAAe,gCACVD,YADU,MAEbD,OAAO,8EAAwE4B,MAAM,CAACE,OAAP,CAAe,CAAf,CAAxE,qBAAqGD,MAArG,gEAFM,GAAf,CAIA;AACA9B,WAAW,CAAC,IAAD,CAAX,CACA,OACD,CAED,GAAI2B,WAAW,GAAK,EAApB,CAAwB,CACtB;AACAxB,eAAe,gCACVD,YADU,MAEbD,OAAO,CAAE,gCAFI,GAAf,CAIA;AACAD,WAAW,CAAC,IAAD,CAAX,CACA,OACD,CATD,IASO,CACL,GAAMc,CAAAA,iBAAiB,CAAG9B,mBAAmB,CAAC6B,qBAApB,CAA0CC,iBAApE,CACA,GAAMC,CAAAA,kBAAkB,CAAG/B,mBAAmB,CAAC6B,qBAApB,CAA0CE,kBAArE,CACA;AACA5B,aAAa,CAAC,KAAD,CAAb,CACA;AACA,GAAI2B,iBAAiB,GAAK,KAA1B,CAAiC,CAC/B;AACAzB,sBAAsB,CAAC,KAAD,CAAtB,CACA;AACAE,yBAAyB,CAAC,IAAD,CAAzB,CACAyC,OAAO,CAACC,GAAR,CAAY,kBAAZ,EACD,CAND,IAMO,CACL;AACA7C,yBAAyB,gCACpBJ,mBADoB,MAEvB6B,qBAAqB,CAAE,CACrBC,iBAAiB,CAAjBA,iBADqB,CAErBC,kBAAkB,CAAlBA,kBAFqB,CAGrBC,gBAAgB,CAAhBA,gBAHqB,CAFA,GAAzB,CASA;AACA,GAAIR,WAAJ,CAAiB,CACf;AACAwB,OAAO,CAACC,GAAR,CAAY,qBAAZ,EACA;AACA5C,sBAAsB,CAAC,KAAD,CAAtB,CACA;AACAC,sBAAsB,CAAC,IAAD,CAAtB,CACD,CAPD,IAOO,CACL;AACAD,sBAAsB,CAAC,KAAD,CAAtB,CACA;AACAG,kBAAkB,CAAC,IAAD,CAAlB,CACA;AACAG,iBAAiB,gCAAMV,WAAN,MAAmBiD,IAAI,CAAE,CAAzB,GAAjB,CACAF,OAAO,CAACC,GAAR,CAAY,YAAZ,EACD,CACF,CACF,CAED;AACAjC,WAAW,CAAC,KAAD,CAAX,CAED,CApFD,CAsFA;AACA,GAAMmC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACxB,CAAD,CAAO,CACpBA,CAAC,CAACC,cAAF,GACA;AACA,GAAMwB,CAAAA,oBAAoB,kBAAQpD,mBAAR,CAA1B,CACA,MAAOoD,CAAAA,oBAAoB,CAAC,oBAAD,CAA3B,CACA,MAAOA,CAAAA,oBAAoB,CAAC,yBAAD,CAA3B,CACA,MAAOA,CAAAA,oBAAoB,CAAC,wBAAD,CAA3B,CACA,MAAOA,CAAAA,oBAAoB,CAAC,uBAAD,CAA3B,CACA;AACAhD,yBAAyB,kBAAMgD,oBAAN,EAAzB,CACA;AACA/C,sBAAsB,CAAC,KAAD,CAAtB,CACA;AACAK,YAAY,CAAC,IAAD,CAAZ,CACA;AACAC,iBAAiB,gCAAMV,WAAN,MAAmBiD,IAAI,CAAE,CAAzB,GAAjB,CACD,CAhBD,CAkBA,mBACE,sCACE,gBAAS,SAAS,CAAC,uBAAnB,uBACE,aAAK,SAAS,CAAC,yBAAf,wBACE,aAAK,SAAS,CAAC,uBAAf,wBACE,aAAK,SAAS,CAAC,eAAf,wBACE,wDADF,cAEE,+PAFF,GADF,CAMGrC,UAAU,cAEP,sCACE,aAAK,KAAK,CAAE,CAAEwC,OAAO,CAAE,MAAX,CAAZ,wBACE,aAAK,SAAS,CAAExC,UAAU,CAAG,+CAAH,CAAqD,IAA/E,wBACE,cAAO,EAAE,CAAC,cAAV,CAAyB,IAAI,CAAC,MAA9B,CAAqC,IAAI,CAAC,WAA1C,CAAsD,QAAQ,CAAE,kBAACc,CAAD,QAAOM,CAAAA,YAAY,CAACN,CAAD,CAAnB,EAAhE,CAAwF,SAAS,CAAC,qBAAlG,CAAwH,QAAQ,CAAE,IAAlI,CAAwI,KAAK,CAAC,cAA9I,EADF,cAEE,aAAM,SAAS,CAAEd,UAAU,CAAG,YAAH,CAAkB,IAA7C,iBAFF,GADF,cAKE,gBAAQ,SAAS,CAAC,sBAAlB,CAAyC,EAAE,CAAC,cAA5C,wBACE,eAAQ,KAAK,CAAC,MAAd,sBADF,cAEE,eAAQ,KAAK,CAAC,IAAd,qBAFF,GALF,GADF,EAFO,cAiBP,sCACE,aAAK,KAAK,CAAE,CAAEwC,OAAO,CAAE,MAAX,CAAZ,wBACE,aAAK,SAAS,CAAC,+BAAf,wBACE,cAAO,UAAQ,WAAf,CAA2B,EAAE,CAAC,cAA9B,CAA6C,IAAI,CAAC,QAAlD,CAA2D,IAAI,CAAC,WAAhE,CAA4E,QAAQ,CAAE,kBAAC1B,CAAD,QAAOM,CAAAA,YAAY,CAACN,CAAD,CAAnB,EAAtF,CAA8G,SAAS,CAAC,qBAAxH,CAA8I,YAAY,CAAEc,SAAS,EAAI,EAAzK,EADF,cAEE,6BAFF,GADF,cAKE,gBAAQ,SAAS,CAAC,sBAAlB,CAAyC,EAAE,CAAC,cAA5C,wBACE,eAAQ,KAAK,CAAC,MAAd,sBADF,cAEE,eAAQ,KAAK,CAAC,IAAd,qBAFF,GALF,GADF,EAvBN,cAsCE,eAAQ,UAAQ,SAAhB,CAA0B,SAAS,CAAC,mBAApC,CAAwD,OAAO,CAAE,iBAACd,CAAD,QAAOD,CAAAA,WAAW,CAACC,CAAD,CAAlB,EAAjE,UAAyFd,UAAU,CAAG,cAAH,CAAoB,cAAvH,EAtCF,CAyCGE,KAAK,GAAK,IAAV,cAEG,KAAC,KAAD,EAAO,OAAO,CAAEG,YAAY,CAACD,OAA7B,EAFH,CAKC,IA9CJ,cAiDE,aAAK,SAAS,CAAC,6BAAf,wBACE,gBAAQ,SAAS,CAAC,4BAAlB,CAA+C,OAAO,CAAE,iBAACU,CAAD,QAAOwB,CAAAA,MAAM,CAACxB,CAAD,CAAb,EAAxD,wBACE,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAE2B,KAAK,CAAE,SAAT,CAAoBC,IAAI,CAAE,MAA1B,CAA7B,uBACE,KAAC,iBAAD,EAAmB,SAAS,CAAC,WAA7B,EADF,EADF,aADF,cAQE,gBAAQ,UAAQ,cAAhB,CAA+B,SAAS,CAAC,4BAAzC,CAAsE,OAAO,CAAE,iBAAC5B,CAAD,QAAOe,CAAAA,SAAS,CAACf,CAAD,CAAhB,EAA/E,mCAGE,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAE2B,KAAK,CAAE,MAAT,CAAiBC,IAAI,CAAE,MAAvB,CAA7B,uBACE,KAAC,kBAAD,EAAoB,SAAS,CAAC,WAA9B,EADF,EAHF,GARF,GAjDF,GADF,CAoEGrD,UAAU,cAEP,aAAK,SAAS,CAAC,iBAAf,wBACE,YAAK,SAAS,CAAC,iBAAf,uBACE,KAAC,UAAD,EAAY,IAAI,CAAE,CAAlB,CAAqB,GAAG,CAAE,KAA1B,EADF,EADF,cAKE,YAAK,SAAS,CAAC,2BAAf,uBACE,KAAC,aAAD,EAAe,IAAI,CAAE,CAArB,EADF,EALF,GAFO,cAaT,YAAK,KAAK,CAAE,CAAEsD,KAAK,CAAE,MAAT,CAAZ,uBACE,YAAK,SAAS,CAAC,oBAAf,uBACE,KAAC,aAAD,EAAe,IAAI,CAAE,CAArB,EADF,EADF,EAjFJ,GADF,EADF,EADF,CA8FD,CAED,cAAezD,CAAAA,YAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./FormUsageKWH.css\";\n\n// Icons\nimport { IconContext } from \"react-icons\";\nimport { IoMdArrowDropleft, IoMdArrowDropright } from 'react-icons/io';\n// Components\nimport FormScript from '../../FormScript/FormScript';\nimport FormAssistant from \"../../FormAssistant/FormAssistant\";\nimport Error from '../../../Error/Error'\n\nfunction FormUsageKWH({ customerInformation, progressBar, showScript, updateAvgElec, updateCustomerInformation, updateShowFormUsageKWH, updateShowFormUsageGAS, updateShowFormUsageGBP_es, updateShowFormDebt, updateShowFormTariffs, updateShowE7, updateProgressBar, updateShowOverlay }) {\n  /* STATES */\n  const [idk_active, update_idk_active] = useState(false);\n\n  // Error State\n  const [error, updateError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState({\n    message: ''\n  });\n\n  /* FUNCTIONS */\n  // Scroll to top & hide overlay\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n\n    // Show overlay\n    updateShowOverlay(false);\n  }, []);\n\n  // Variables\n  const dual_active = customerInformation.fuel_description.dual_active;\n\n  // Handle Click - idk\n  const handleClick = (e) => {\n    e.preventDefault();\n    // Update Error\n    updateError(false);\n    // Update state\n    update_idk_active(!idk_active);\n    const usage_kwh_description = {\n      usage_kwh_entered: false,\n      usage_kwh_expended: false,\n      usage_kwh_period: false\n    }\n    // Update state\n    updateCustomerInformation({\n      ...customerInformation,\n      usage_kwh_description\n    });\n  }\n\n  // Handle Change - Input\n  const handleChange = (e) => {\n    // Update Error\n    updateError(false);\n    const usage_select = document.getElementById('usage_select').value;\n    const usage_kwh_description = {\n      usage_kwh_entered: true,\n      usage_kwh_expended: e.target.value.replace(/[^0-9\\.]+/g, '').trim(),\n      usage_kwh_period: usage_select\n    }\n    // Update state\n    updateCustomerInformation({\n      ...customerInformation,\n      usage_kwh_description\n    });\n  }\n\n  // Initial Values - Inputs\n  let value_kwh = '';\n  if (value_kwh) {\n    value_kwh = customerInformation.usage_kwh_description.usage_kwh_expended;\n  }\n\n  // Send usage\n  const sendUsage = (e) => {\n    e.preventDefault();\n    // Validation\n    const usage_value = document.getElementById('usage_kwh_id').value;\n    const usage_kwh_period = document.getElementById('usage_select').value;\n\n    // Validation\n    if (((parseFloat(usage_value) > 50000) && (usage_kwh_period === 'annu')) || ((parseFloat(usage_value) > 4166.666) && (usage_kwh_period === 'mo'))) {\n      let amount = '';\n      let period = '';\n\n      // Amount & period\n      if (usage_kwh_period === 'annu') {\n        amount = 50000;\n        period = 'year';\n      } else {\n        amount = 4166.666;\n        period = 'month';\n      }\n      // Set error message\n      setErrorMessage({\n        ...errorMessage,\n        message: `Please check how much you use on electricity. If you use more than ${amount.toFixed(2)} kWh per ${period} we can't compare this against domestic consumption tariffs.`\n      });\n      // Show error\n      updateError(true);\n      return;\n    }\n\n    if (usage_value === '') {\n      // Set error message\n      setErrorMessage({\n        ...errorMessage,\n        message: \"Please introduce a valid usage\"\n      });\n      // Update Error\n      updateError(true);\n      return;\n    } else {\n      const usage_kwh_entered = customerInformation.usage_kwh_description.usage_kwh_entered;\n      const usage_kwh_expended = customerInformation.usage_kwh_description.usage_kwh_expended;\n      // Update State\n      updateAvgElec(false);\n      // View conditional\n      if (usage_kwh_entered === false) {\n        // Hidde Form Usage\n        updateShowFormUsageKWH(false);\n        // Show FormUsageGBP_es\n        updateShowFormUsageGBP_es(true);\n        console.log('Show UsageGBP_es');\n      } else {\n        // Update state\n        updateCustomerInformation({\n          ...customerInformation,\n          usage_kwh_description: {\n            usage_kwh_entered,\n            usage_kwh_expended,\n            usage_kwh_period\n          }\n        });\n\n        // Conditional view controller - Form compare / Gas section\n        if (dual_active) {\n          // Show Form Usage Gas\n          console.log('Show Form Usage Gas');\n          // Hidde Form Usage KWH\n          updateShowFormUsageKWH(false);\n          // Show Form Usage Gas\n          updateShowFormUsageGAS(true);\n        } else {\n          // Hidde Form usage\n          updateShowFormUsageKWH(false);\n          // Show Debt\n          updateShowFormDebt(true);\n          // Update Progressbar\n          updateProgressBar({ ...progressBar, step: 7 });\n          console.log('Send usage');\n        }\n      }\n    }\n\n    // Update error\n    updateError(false);\n\n  }\n\n  // Go back\n  const goBack = (e) => {\n    e.preventDefault();\n    // Delete Customer tariff\n    const copy_customer_tariff = { ...customerInformation };\n    delete copy_customer_tariff['tariff_description'];\n    delete copy_customer_tariff['tariff_description_elec'];\n    delete copy_customer_tariff['tariff_description_gas'];\n    delete copy_customer_tariff['usage_kwh_description'];\n    //Update Customer Information\n    updateCustomerInformation({ ...copy_customer_tariff });\n    // Hidde Form Usage\n    updateShowFormUsageKWH(false);\n    // Show Form E7\n    updateShowE7(true);\n    // Update progress bar\n    updateProgressBar({ ...progressBar, step: 5 });\n  };\n\n  return (\n    <>\n      <section className=\"form-usagekwh-section\">\n        <div className=\"form-usagekwh-container\">\n          <div className=\"form-usagekwh-content\">\n            <div className=\"form-usagekwh\">\n              <h1>How much electricity do you use?</h1>\n              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat aut sint, possimus suscipit hic obcaecati ad necessitatibus eum asperiores maiores in, inventore quidem quibusdam modi. Veniam recusandae maiores voluptatem voluptates?</p>\n            </div>\n\n            {idk_active ?\n              (\n                <>\n                  <div style={{ display: 'flex' }}>\n                    <div className={idk_active ? \"form-usagekwh-input-container customContainer\" : null} >\n                      <input id=\"usage_kwh_id\" type=\"text\" name=\"usage_kwh\" onChange={(e) => handleChange(e)} className=\"form-usagekwh-input\" disabled={true} value=\"I don't know\" />\n                      <span className={idk_active ? \"customSpan\" : null}>kWh</span>\n                    </div>\n                    <select className=\"form-usagekwh-select\" id=\"usage_select\">\n                      <option value=\"annu\">Annually</option>\n                      <option value=\"mo\">Monthly</option>\n                    </select>\n                  </div>\n                </>\n              )\n              :\n              (\n                <>\n                  <div style={{ display: 'flex' }}>\n                    <div className=\"form-usagekwh-input-container\" >\n                      <input data-cy=\"kwh-input\" id=\"usage_kwh_id\" type=\"number\" name=\"usage_kwh\" onChange={(e) => handleChange(e)} className=\"form-usagekwh-input\" defaultValue={value_kwh || ''} />\n                      <span>kWh</span>\n                    </div>\n                    <select className=\"form-usagekwh-select\" id=\"usage_select\">\n                      <option value=\"annu\">Annually</option>\n                      <option value=\"mo\">Monthly</option>\n                    </select>\n                  </div>\n                </>\n              )\n            }\n\n            <button data-cy=\"kwh-idk\" className=\"form-usagekwh-idk\" onClick={(e) => handleClick(e)}>{idk_active ? \"Enable input\" : \"I don't know\"}</button>\n\n            {/* Error */}\n            {error === true ?\n              (\n                <Error message={errorMessage.message} />\n              )\n              :\n              null}\n\n            {/* Buttons */}\n            <div className=\"form-usagekwh-btn-container\">\n              <button className=\"form-usagekwh-btn btn-back\" onClick={(e) => goBack(e)}>\n                <IconContext.Provider value={{ color: '#D338AE', size: '35px' }}>\n                  <IoMdArrowDropleft className=\"icon-back\" />\n                </IconContext.Provider>\n                Go back\n              </button>\n\n              <button data-cy=\"kwh-continue\" className=\"form-usagekwh-btn btn-next\" onClick={(e) => sendUsage(e)}>\n                Continue\n\n                <IconContext.Provider value={{ color: '#FFF', size: '35px' }}>\n                  <IoMdArrowDropright className=\"icon-next\" />\n                </IconContext.Provider>\n              </button>\n            </div>\n          </div>\n\n          {showScript ?\n            (\n              <div className=\"helper-usagekwh\">\n                <div className=\"script-usagekwh\">\n                  <FormScript step={7} use={'kwh'} />\n                </div>\n\n                <div className=\"assistant-usagekwh-custom\">\n                  <FormAssistant tips={6} />\n                </div>\n              </div>\n            )\n            :\n            <div style={{ width: '100%' }}>\n              <div className=\"assistant-usagekwh\">\n                <FormAssistant tips={6} />\n              </div>\n            </div>\n          }\n        </div>\n      </section>\n    </>\n  );\n}\n\nexport default FormUsageKWH;\n"]},"metadata":{},"sourceType":"module"}