{"ast":null,"code":"import _objectSpread from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';// React Router\nimport{useHistory}from'react-router-dom';// Firebase\nimport{db,auth}from'../../firebase/firebase';import firebase from\"firebase/app\";// Components\nimport Overlay from'../Overlay/Overlay';// Icons\nimport{FaRegUser}from\"react-icons/fa\";// CSS\nimport'./Navbar.css';// Icons\nimport{IoMdCloseCircleOutline}from\"react-icons/io\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Navbar(_ref){var progressBar=_ref.progressBar,user=_ref.user;/**-- STATES --*/var _useState=useState(false),_useState2=_slicedToArray(_useState,2),overlay=_useState2[0],updateOverlay=_useState2[1];// ActiveBreak\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),activeBreak=_useState4[0],updateActiveBreak=_useState4[1];// Close button effect\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),btnCloseAnimation=_useState6[0],setBtnCloseAnimation=_useState6[1];// Histoty\nvar history=useHistory();// Initial state \nvar step=progressBar.step;var percentage=document.getElementById('percentage');var step_text='Enter your postcode';if(step===0){if(percentage!==null){percentage.style.width='0%';step_text='Enter your postcode';}}// Step 1\nif(step===1){percentage.style.width='10%';step_text='Enter your full address';}// Step 2\nif(step===2){percentage.style.width='20%';step_text='Choose your fuel type';}// Step 3\nif(step===3){percentage.style.width='30%';step_text='Supply number';}// Step 4\nif(step===4){percentage.style.width='40%';step_text='Choose your energy supplier(s)';}// Step 5\nif(step===5){percentage.style.width='50%';step_text='Enter economy 7';}// Step 6\nif(step===6){percentage.style.width='60%';step_text='How much energy do you use?';}// Step 7\nif(step===7){percentage.style.width='65%';step_text='Existing debt';}// Step 8\nif(step===8){percentage.style.width='70%';step_text='Compare section';}// Step 9\nif(step===9){percentage.style.width='80%';step_text='Customer Details';}// Step 10\nif(step===10){percentage.style.width='90%';step_text='Bank Details';}// Step 11\nif(step===11){percentage.style.width='100%';step_text='Sign up successful';}/**-- FUNCTIONS --*/ // activeSidebar\nvar activeSidebar=function activeSidebar(){// Active Sidebar \nvar sidebar=document.getElementById(\"sidebar\");sidebar.classList.toggle('active-sidebar');// setBtnCloseAnimation\nsetBtnCloseAnimation(false);// Show Overlay\nupdateOverlay(true);};// closeSidebar\nvar closeSidebar=function closeSidebar(){// Close Sidebar \nvar sidebar=document.getElementById(\"sidebar\");sidebar.classList.remove('active-sidebar');// setBtnCloseAnimation\nsetBtnCloseAnimation(true);// Hide Overlay\nupdateOverlay(false);};// startBreak\nvar startBreak=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var year,month,date,milliseconds,breakId,breakData,docRef,getUserData,userData,sidebar;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('startBreak');// Get year\nyear=new Date().getFullYear();// Get month\nmonth=new Date().getMonth();// Get date\ndate=new Date().getDate();// Get time in milliseconds\nmilliseconds=new Date().getTime();// Break ID\nbreakId=\"break-start-\".concat(date,\"-\").concat(month,\"-\").concat(year,\"-\").concat(milliseconds);// Break data object\nbreakData={};// Create new object key\nbreakData[breakId]={timeStamp:firebase.firestore.FieldValue.serverTimestamp()};// Document ref\n_context2.next=10;return db.collection(\"users\").doc(user.uid);case 10:docRef=_context2.sent;// Fetching userData data\ngetUserData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",docRef.get().then(function(doc){// If userData exist\nif(doc.exists){return doc.data();}return;}));case 1:case\"end\":return _context.stop();}}},_callee);}));return function getUserData(){return _ref3.apply(this,arguments);};}();// Assign getUserData\n_context2.next=14;return getUserData();case 14:userData=_context2.sent;// Validation\nif(userData){// Update user in firebase\ndb.collection(\"users\").doc(user.uid).update(_objectSpread(_objectSpread({},userData),{},{// Add into the breakStart object\nbreakStart:_objectSpread(_objectSpread({},userData.breakStart),breakData)}));}// Close Sidebar \nsidebar=document.getElementById(\"sidebar\");sidebar.classList.remove('active-sidebar');// Hide Overlay\nupdateOverlay(false);// Uodate activeBreak\nupdateActiveBreak(!activeBreak);case 20:case\"end\":return _context2.stop();}}},_callee2);}));return function startBreak(){return _ref2.apply(this,arguments);};}();// endBreak\nvar endBreak=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var year,month,date,milliseconds,breakId,breakData,docRef,getUserData,userData,sidebar;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log('endBreak');// Get year\nyear=new Date().getFullYear();// Get month\nmonth=new Date().getMonth();// Get date\ndate=new Date().getDate();// Get time in milliseconds\nmilliseconds=new Date().getTime();// Break ID\nbreakId=\"break-end-\".concat(date,\"-\").concat(month,\"-\").concat(year,\"-\").concat(milliseconds);// Break data object\nbreakData={};// Create new object key\nbreakData[breakId]={timeStamp:firebase.firestore.FieldValue.serverTimestamp()};// Document ref\n_context4.next=10;return db.collection(\"users\").doc(user.uid);case 10:docRef=_context4.sent;// Fetching userData data\ngetUserData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",docRef.get().then(function(doc){// If userData exist\nif(doc.exists){return doc.data();}return;}));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function getUserData(){return _ref5.apply(this,arguments);};}();// Assign getUserData\n_context4.next=14;return getUserData();case 14:userData=_context4.sent;// Validation\nif(userData){// Update user in firebase\ndb.collection(\"users\").doc(user.uid).update(_objectSpread(_objectSpread({},userData),{},{// Add into the breakEnd object\nbreakEnd:_objectSpread(_objectSpread({},userData.breakEnd),breakData)}));}// Close Sidebar \nsidebar=document.getElementById(\"sidebar\");sidebar.classList.remove('active-sidebar');// Hide Overlay\nupdateOverlay(false);// Uodate activeBreak\nupdateActiveBreak(!activeBreak);case 20:case\"end\":return _context4.stop();}}},_callee4);}));return function endBreak(){return _ref4.apply(this,arguments);};}();// signOut\nvar signOut=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return auth.signOut().then(function(){console.log('Sign-out successful.');// Redirect\n// Redirect\nhistory.push('/');// Firebase\n// Firebase\ndb.collection('signOutLogs').add({email:email,signInTime:firebase.firestore.FieldValue.serverTimestamp()});}).catch(function(error){console.log('An error happened.');console.log(error);});case 2:return _context5.abrupt(\"return\");case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function signOut(){return _ref6.apply(this,arguments);};}();// User information\nvar email=user.email;var name=user.displayName;var photoURL=user.photoURL;// customMargin\nvar customMargin;// signContainer\nvar signContainer=document.getElementById('sign-container');if(signContainer){customMargin=(signContainer.offsetWidth-120)/2;}return/*#__PURE__*/_jsxs(_Fragment,{children:[overlay?/*#__PURE__*/_jsx(Overlay,{}):null,/*#__PURE__*/_jsx(\"div\",{id:\"sidebar\",className:\"sidebar-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"sidebar-btn\",href:\"https://sales-portal.utilityswitchboard.com/\",target:\"_blank\",rel:\"noopener\",children:\"Sales Portal\"}),/*#__PURE__*/_jsx(IoMdCloseCircleOutline,{className:btnCloseAnimation?\"closebtn animate__animated animate__slideOutRight\":'closebtn',onClick:function onClick(){return closeSidebar();}}),activeBreak?/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-btn\",onClick:function onClick(){return startBreak();},children:\"Start break\"}):/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-btn\",onClick:function onClick(){return endBreak();},children:\"End break\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-btn\",onClick:function onClick(){return signOut();},children:\"Log Out\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"navbar-container\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"a\",{href:\".\",className:\"navbar-logo\",style:{marginRight:customMargin},children:/*#__PURE__*/_jsx(\"img\",{src:\"https://924601.smushcdn.com/2398792/wp-content/themes/twentytwentyone/assets/images/usb-logo-white.png?lossy=1&strip=1&webp=1\",alt:\"Logo\",width:\"120\",loading:\"lazy\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar-container\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"progress-bar\",className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"percentage\",id:\"percentage\"})}),/*#__PURE__*/_jsx(\"p\",{children:step_text})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sign-container\",id:\"sign-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sign-content\",onClick:function onClick(){return activeSidebar();},children:[photoURL?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"avatar-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:photoURL,alt:\"Avatar\",width:\"35\",style:{borderRadius:\"50%\"},loading:\"lazy\"}),/*#__PURE__*/_jsx(\"div\",{className:activeBreak?'status-circle break':'status-circle',id:\"status\"})]})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"avatar-container\",children:[/*#__PURE__*/_jsx(FaRegUser,{className:\"user-icon\"}),/*#__PURE__*/_jsx(\"div\",{className:activeBreak?'status-circle-icon break':'status-circle-icon',id:\"status\"})]})}),/*#__PURE__*/_jsxs(\"p\",{className:\"sign\",children:[\"Hi, \",user!==undefined?name?name.split(' ').slice(0,2).join(' '):email.replace('@utilityswitchboard.com',''):null,\"!\"]})]})})]})})]});}export default Navbar;","map":{"version":3,"sources":["/Users/juanlugo/Desktop/sp-firebase/src/components/Navbar/Navbar.jsx"],"names":["React","useEffect","useState","useHistory","db","auth","firebase","Overlay","FaRegUser","IoMdCloseCircleOutline","Navbar","progressBar","user","overlay","updateOverlay","activeBreak","updateActiveBreak","btnCloseAnimation","setBtnCloseAnimation","history","step","percentage","document","getElementById","step_text","style","width","activeSidebar","sidebar","classList","toggle","closeSidebar","remove","startBreak","console","log","year","Date","getFullYear","month","getMonth","date","getDate","milliseconds","getTime","breakId","breakData","timeStamp","firestore","FieldValue","serverTimestamp","collection","doc","uid","docRef","getUserData","get","then","exists","data","userData","update","breakStart","endBreak","breakEnd","signOut","push","add","email","signInTime","catch","error","name","displayName","photoURL","customMargin","signContainer","offsetWidth","marginRight","borderRadius","undefined","split","slice","join","replace"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\n// React Router\nimport { useHistory } from 'react-router-dom';\n// Firebase\nimport { db, auth } from '../../firebase/firebase';\nimport firebase from \"firebase/app\";\n// Components\nimport Overlay from '../Overlay/Overlay';\n// Icons\nimport { FaRegUser } from \"react-icons/fa\";\n// CSS\nimport './Navbar.css';\n// Icons\nimport { IoMdCloseCircleOutline } from \"react-icons/io\";\n\nfunction Navbar({ progressBar, user }) {\n\n    /**-- STATES --*/\n    const [overlay, updateOverlay] = useState(false);\n\n    // ActiveBreak\n    const [activeBreak, updateActiveBreak] = useState(false);\n\n    // Close button effect\n    const [btnCloseAnimation, setBtnCloseAnimation] = useState(false);\n\n    // Histoty\n    const history = useHistory();\n\n    // Initial state \n    const step = progressBar.step;\n    const percentage = document.getElementById('percentage');\n    let step_text = 'Enter your postcode';\n    if (step === 0) {\n        if (percentage !== null) {\n            percentage.style.width = '0%';\n            step_text = 'Enter your postcode';\n        }\n    }\n    // Step 1\n    if (step === 1) {\n        percentage.style.width = '10%';\n        step_text = 'Enter your full address';\n    }\n    // Step 2\n    if (step === 2) {\n        percentage.style.width = '20%';\n        step_text = 'Choose your fuel type';\n    }\n    // Step 3\n    if (step === 3) {\n        percentage.style.width = '30%';\n        step_text = 'Supply number';\n    }\n    // Step 4\n    if (step === 4) {\n        percentage.style.width = '40%';\n        step_text = 'Choose your energy supplier(s)';\n    }\n    // Step 5\n    if (step === 5) {\n        percentage.style.width = '50%';\n        step_text = 'Enter economy 7';\n    }\n\n    // Step 6\n    if (step === 6) {\n        percentage.style.width = '60%';\n        step_text = 'How much energy do you use?';\n    }\n\n    // Step 7\n    if (step === 7) {\n        percentage.style.width = '65%';\n        step_text = 'Existing debt';\n    }\n\n    // Step 8\n    if (step === 8) {\n        percentage.style.width = '70%';\n        step_text = 'Compare section';\n    }\n\n    // Step 9\n    if (step === 9) {\n        percentage.style.width = '80%';\n        step_text = 'Customer Details';\n    }\n\n    // Step 10\n    if (step === 10) {\n        percentage.style.width = '90%';\n        step_text = 'Bank Details';\n    }\n\n    // Step 11\n    if (step === 11) {\n        percentage.style.width = '100%';\n        step_text = 'Sign up successful';\n    }\n\n    /**-- FUNCTIONS --*/\n\n    // activeSidebar\n    const activeSidebar = () => {\n        // Active Sidebar \n        let sidebar = document.getElementById(\"sidebar\");\n        sidebar.classList.toggle('active-sidebar');\n\n        // setBtnCloseAnimation\n        setBtnCloseAnimation(false);\n\n        // Show Overlay\n        updateOverlay(true);\n    }\n\n    // closeSidebar\n    const closeSidebar = () => {\n        // Close Sidebar \n        let sidebar = document.getElementById(\"sidebar\");\n        sidebar.classList.remove('active-sidebar');\n\n        // setBtnCloseAnimation\n        setBtnCloseAnimation(true);\n\n        // Hide Overlay\n        updateOverlay(false);\n    }\n\n    // startBreak\n    const startBreak = async () => {\n        console.log('startBreak');\n        // Get year\n        let year = new Date().getFullYear();\n        // Get month\n        let month = new Date().getMonth();\n        // Get date\n        let date = new Date().getDate();\n        // Get time in milliseconds\n        let milliseconds = new Date().getTime();\n        // Break ID\n        let breakId = `break-start-${date}-${month}-${year}-${milliseconds}`;\n\n        // Break data object\n        let breakData = {};\n\n        // Create new object key\n        breakData[breakId] = { timeStamp: firebase.firestore.FieldValue.serverTimestamp() };\n\n        // Document ref\n        let docRef = await db.collection(\"users\").doc(user.uid);\n\n        // Fetching userData data\n        const getUserData = async () => docRef.get().then((doc) => {\n            // If userData exist\n            if (doc.exists) {\n                return doc.data();\n            }\n\n            return;\n        });\n\n        // Assign getUserData\n        let userData = await getUserData();\n\n        // Validation\n        if (userData) {\n            // Update user in firebase\n            db.collection(\"users\").doc(user.uid).update({\n                // Save a copy of the actual data\n                ...userData,\n                // Add into the breakStart object\n                breakStart: {\n                    // Save a copy of the actual data\n                    ...userData.breakStart,\n                    // Add new field\n                    ...breakData\n                }\n            });\n        }\n\n        // Close Sidebar \n        let sidebar = document.getElementById(\"sidebar\");\n        sidebar.classList.remove('active-sidebar');\n\n        // Hide Overlay\n        updateOverlay(false);\n        // Uodate activeBreak\n        updateActiveBreak(!activeBreak);\n    }\n\n    // endBreak\n    const endBreak = async () => {\n        console.log('endBreak');\n        // Get year\n        let year = new Date().getFullYear();\n        // Get month\n        let month = new Date().getMonth();\n        // Get date\n        let date = new Date().getDate();\n        // Get time in milliseconds\n        let milliseconds = new Date().getTime();\n        // Break ID\n        let breakId = `break-end-${date}-${month}-${year}-${milliseconds}`;\n\n        // Break data object\n        let breakData = {};\n\n        // Create new object key\n        breakData[breakId] = { timeStamp: firebase.firestore.FieldValue.serverTimestamp() };\n\n        // Document ref\n        let docRef = await db.collection(\"users\").doc(user.uid);\n\n        // Fetching userData data\n        const getUserData = async () => docRef.get().then((doc) => {\n            // If userData exist\n            if (doc.exists) {\n                return doc.data();\n            }\n\n            return;\n        });\n\n        // Assign getUserData\n        let userData = await getUserData();\n\n        // Validation\n        if (userData) {\n            // Update user in firebase\n            db.collection(\"users\").doc(user.uid).update({\n                // Save a copy of the actual data\n                ...userData,\n                // Add into the breakEnd object\n                breakEnd: {\n                    // Save a copy of the actual data\n                    ...userData.breakEnd,\n                    // Add new field\n                    ...breakData\n                }\n            });\n        }\n\n        // Close Sidebar \n        let sidebar = document.getElementById(\"sidebar\");\n        sidebar.classList.remove('active-sidebar');\n\n        // Hide Overlay\n        updateOverlay(false);\n        // Uodate activeBreak\n        updateActiveBreak(!activeBreak);\n    }\n\n    // signOut\n    const signOut = async () => {\n        // Sign Out - Firebase\n        await auth.signOut().then(() => {\n            console.log('Sign-out successful.');\n            // Redirect\n            history.push('/');\n            // Firebase\n            db.collection('signOutLogs').add({\n                email,\n                signInTime: firebase.firestore.FieldValue.serverTimestamp()\n            });\n        }).catch((error) => {\n            console.log('An error happened.');\n            console.log(error);\n        });\n\n        return;\n    }\n\n    // User information\n    const email = user.email;\n    const name = user.displayName;\n    const photoURL = user.photoURL;\n\n    // customMargin\n    let customMargin;\n\n    // signContainer\n    let signContainer = document.getElementById('sign-container');\n\n    if (signContainer) {\n        customMargin = ((signContainer.offsetWidth - 120) / 2);\n    }\n\n    return (\n        <>\n            {/* Overlay */}\n            {overlay ?\n                <Overlay />\n                :\n                null\n            }\n\n            {/* Sidebar */}\n            <div id=\"sidebar\" className=\"sidebar-container\">\n                <div className=\"sidebar\">\n                    {/* <button className=\"closebtn\" onClick={() => closeSidebar()}><i className=\"far fa-times-circle\"></i></button> */}\n                    <a className=\"sidebar-btn\" href=\"https://sales-portal.utilityswitchboard.com/\" target=\"_blank\" rel=\"noopener\">Sales Portal</a>\n                    <IoMdCloseCircleOutline className={btnCloseAnimation ? \"closebtn animate__animated animate__slideOutRight\" : 'closebtn'} onClick={() => closeSidebar()} />\n\n                    {activeBreak ?\n                        (\n                            <button className=\"sidebar-btn\" onClick={() => startBreak()}>\n                                Start break\n                            </button>\n                        )\n                        :\n                        (\n                            <button className=\"sidebar-btn\" onClick={() => endBreak()}>\n                                End break\n                            </button>\n                        )\n                    }\n\n                    <button className=\"sidebar-btn\" onClick={() => signOut()}>\n                        Log Out\n                    </button>\n                </div>\n            </div>\n\n            {/* Navbar */}\n            <div className=\"navbar-container\">\n                <nav className=\"navbar\">\n                    <a href=\".\" className=\"navbar-logo\" style={{marginRight: customMargin}}>\n                        <img src=\"https://924601.smushcdn.com/2398792/wp-content/themes/twentytwentyone/assets/images/usb-logo-white.png?lossy=1&strip=1&webp=1\" alt=\"Logo\" width=\"120\" loading=\"lazy\" />\n                    </a>\n\n                    <div className=\"progress-bar-container\">\n                        <div id=\"progress-bar\" className=\"progress-bar\">\n                            <div className=\"percentage\" id=\"percentage\"></div>\n                        </div>\n                        <p>{step_text}</p>\n                    </div>\n\n                    <div className=\"sign-container\" id=\"sign-container\" >\n                        <div className=\"sign-content\" onClick={() => activeSidebar()}>\n                            {\n                                photoURL ?\n                                    (\n                                        <>\n                                            <div className=\"avatar-container\">\n                                                <img src={photoURL} alt=\"Avatar\" width=\"35\" style={{ borderRadius: \"50%\" }} loading=\"lazy\" />\n                                                <div className={activeBreak ? 'status-circle break' : 'status-circle'} id=\"status\"></div>\n                                            </div>\n                                        </>\n                                    )\n                                    :\n                                    (\n                                        <>\n                                            <div className=\"avatar-container\">\n                                                <FaRegUser className=\"user-icon\" />\n                                                <div className={activeBreak ? 'status-circle-icon break' : 'status-circle-icon'} id=\"status\"></div>\n                                            </div>\n                                        </>\n                                    )\n                            }\n                            <p className=\"sign\">Hi, {user !== undefined ? name ? name.split(' ').slice(0, 2).join(' ') : email.replace('@utilityswitchboard.com', '') : null}!</p>\n                            {/* <p className=\"sign\">Hi, {user.displayName}!</p> */}\n                        </div>\n                    </div>\n                </nav>\n            </div>\n        </>\n    )\n}\n\nexport default Navbar;\n"]},"metadata":{},"sourceType":"module"}