{"ast":null,"code":"import _regeneratorRuntime from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";// Components\nimport Error from\"../../components/Error/Error\";// CSS\nimport\"./Login.css\";// Firebase\nimport{db,auth,googleProvider}from\"../../firebase/firebase\";import firebase from\"firebase/app\";// Images\nimport MoneyMan from\"../../assets/img/moneyMan.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){var _jsx2,_jsx3;/**-- STATES --*/ // User state\nvar _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];// Error state\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],updateError=_useState4[1];var _useState5=useState({message:''}),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],updateErrorMessage=_useState6[1];// Taking user values\nvar email=user.email,password=user.password;var onChange=function onChange(e){setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value.replace(/ /g,\"\"))));};// Check session method\nvar checkSessionMethod=function checkSessionMethod(email){var signInMethodsForEmail=auth.fetchSignInMethodsForEmail(email).then(function(res){return res[0];});return signInMethodsForEmail;};var dispatchModal=function dispatchModal(e){e.preventDefault();document.getElementById(\"modal\").style.display='flex';};// Submit form\nvar _onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var email,password,methodType;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();email=user.email;password=user.password;// Email field validation\nif(!(email===\"\")){_context.next=7;break;}updateErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:'Email is required'}));// Show error\nupdateError(true);return _context.abrupt(\"return\");case 7:if(!(password===\"\")){_context.next=11;break;}updateErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:'Password is required'}));// Show error\nupdateError(true);return _context.abrupt(\"return\");case 11:_context.next=13;return checkSessionMethod(email);case 13:methodType=_context.sent;updateErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:'Email address already in use.'}));// Checking method type\nif(!(methodType==='google.com')){_context.next=19;break;}// Error message\nupdateErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:'Please, sign in with your Google account'}));// Show error\nupdateError(true);return _context.abrupt(\"return\");case 19:_context.next=21;return auth.signInWithEmailAndPassword(email,password).then(function(userCredential){console.log('Success');// console.log(userCredential.user.uid);\n// Firebase\n// console.log(userCredential.user.uid);\n// Firebase\ndb.collection('signInLogs').add({email:email,signInTime:firebase.firestore.FieldValue.serverTimestamp()});}).catch(function(error){console.error(error);switch(error.code){case'auth/email-already-in-use':updateErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:'Email address already in use.'}));break;case'auth/invalid-email':updateErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:'Email address is invalid.'}));break;case'auth/operation-not-allowed':updateErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:'Error during sign up.'}));break;case'auth/weak-password':updateErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:'Password is not strong enough. Add additional characters including special characters and numbers.'}));break;case'auth/wrong-password':updateErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:'Password is wrong'}));break;case'auth/user-not-found':updateErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:'User not found, try with your google account instead'}));break;default:updateErrorMessage(_objectSpread(_objectSpread({},errorMessage),{},{message:error.message}));break;}updateError(true);});case 21:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var signInWithGoogle=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();// auth.signInWithRedirect(googleProvider);\n_context2.next=3;return auth.signInWithPopup(googleProvider).then(function(result){// Email\nvar email=result.user.email;// Firebase\n// Firebase\ndb.collection('signInLogs').add({email:email,signInTime:firebase.firestore.FieldValue.serverTimestamp()});}).catch(function(error){// Handle Errors here.\nvar errorCode=error.code;var errorMessage=error.message;// The email of the user's account used.\n// The email of the user's account used.\nvar email=error.email;// The firebase.auth.AuthCredential type that was used.\n// The firebase.auth.AuthCredential type that was used.\nvar credential=error.credential;if(errorCode){console.error(errorCode);}if(errorMessage){console.error(errorMessage);}if(email){console.error(email);}if(credential){console.error(credential);}return;});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function signInWithGoogle(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"some-page-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"title-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-title\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Utility Switchboard\"}),/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Savings Portal\"}),\".\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-login\",onClick:function onClick(e){return dispatchModal(e);},children:\"Sign In\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal animate__animated animate__pulse\",id:\"modal\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return _onSubmit(e);},className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://utilityswitchboard.com/wp-content/uploads/2021/07/usb-favicon.png\",alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-field\",children:/*#__PURE__*/_jsx(\"input\",(_jsx2={type:\"email\",id:\"email\",name:\"email\",placeholder:\"Introduce email\",value:email||'',onChange:onChange},_defineProperty(_jsx2,\"placeholder\",\"Email\"),_defineProperty(_jsx2,\"required\",true),_jsx2))}),/*#__PURE__*/_jsx(\"div\",{className:\"form-field\",children:/*#__PURE__*/_jsx(\"input\",(_jsx3={type:\"password\",id:\"password\",name:\"password\",placeholder:\"Introduce password\",value:password||'',onChange:onChange},_defineProperty(_jsx3,\"placeholder\",\"Password\"),_defineProperty(_jsx3,\"autoComplete\",\"on\"),_defineProperty(_jsx3,\"required\",true),_jsx3))}),error?/*#__PURE__*/_jsx(\"div\",{className:\"error-modal\",children:/*#__PURE__*/_jsx(Error,{message:errorMessage.message})}):null,/*#__PURE__*/_jsx(\"div\",{className:\"login-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-login\",children:\"Sign In\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Or sign in using\"}),/*#__PURE__*/_jsx(\"button\",{className:\"google-btn\",onClick:function onClick(e){return signInWithGoogle(e);},children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"google-icon\",src:\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\",loading:\"lazy\"})})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"column\",children:/*#__PURE__*/_jsx(\"div\",{className:\"image-column\",children:/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:MoneyMan,alt:\"Saving Money\"})})})})]})})});}export default Login;","map":{"version":3,"sources":["/Users/juanlugo/Desktop/sp-firebase/src/pages/LoginPage/Login.jsx"],"names":["React","useState","Error","db","auth","googleProvider","firebase","MoneyMan","Login","email","password","user","setUser","error","updateError","message","errorMessage","updateErrorMessage","onChange","e","target","name","value","replace","checkSessionMethod","signInMethodsForEmail","fetchSignInMethodsForEmail","then","res","dispatchModal","preventDefault","document","getElementById","style","display","onSubmit","methodType","signInWithEmailAndPassword","userCredential","console","log","collection","add","signInTime","firestore","FieldValue","serverTimestamp","catch","code","signInWithGoogle","signInWithPopup","result","errorCode","credential"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\n// Components\nimport Error from \"../../components/Error/Error\";\n// CSS\nimport \"./Login.css\";\n// Firebase\nimport { db, auth, googleProvider } from \"../../firebase/firebase\";\nimport firebase from \"firebase/app\";\n// Images\nimport MoneyMan from \"../../assets/img/moneyMan.png\";\n\nfunction Login() {\n\n    /**-- STATES --*/\n\n    // User state\n    const [user, setUser] = useState({\n        email: \"\",\n        password: \"\",\n    });\n\n    // Error state\n    const [error, updateError] = useState(false);\n    const [errorMessage, updateErrorMessage] = useState({ message: '' })\n\n    // Taking user values\n    const { email, password } = user;\n    const onChange = (e) => {\n        setUser({\n            ...user,\n            [e.target.name]: e.target.value.replace(/ /g, \"\"),\n        });\n    };\n\n    // Check session method\n    const checkSessionMethod = (email) => {\n\n        let signInMethodsForEmail = auth.fetchSignInMethodsForEmail(email).then((res) => {\n            return res[0];\n        });\n\n        return signInMethodsForEmail;\n\n    };\n\n    const dispatchModal = (e) => {\n        e.preventDefault();\n\n        document.getElementById(\"modal\").style.display = 'flex';\n    }\n\n    // Submit form\n    const onSubmit = async (e) => {\n        e.preventDefault();\n\n        const email = user.email;\n        const password = user.password;\n\n        // Email field validation\n        if (email === \"\") {\n            updateErrorMessage({ ...errorMessage, message: 'Email is required' })\n            // Show error\n            updateError(true);\n            return;\n        }\n\n        // Password field validation\n        if (password === \"\") {\n            updateErrorMessage({ ...errorMessage, message: 'Password is required' })\n            // Show error\n            updateError(true);\n            return;\n        }\n\n        // Method type\n        const methodType = await checkSessionMethod(email);\n\n        updateErrorMessage({ ...errorMessage, message: 'Email address already in use.' });\n\n        // Checking method type\n        if (methodType === 'google.com') {\n            // Error message\n            updateErrorMessage({ ...errorMessage, message: 'Please, sign in with your Google account' });\n            // Show error\n            updateError(true);\n            return;\n        }\n\n        // Dispatch Sign in function\n        await auth.signInWithEmailAndPassword(email, password).then((userCredential) => {\n            console.log('Success')\n            // console.log(userCredential.user.uid);\n            // Firebase\n            db.collection('signInLogs').add({\n                email,\n                signInTime: firebase.firestore.FieldValue.serverTimestamp(),\n            });\n        }).catch(error => {\n            console.error(error);\n            switch (error.code) {\n                case 'auth/email-already-in-use':\n                    updateErrorMessage({ ...errorMessage, message: 'Email address already in use.' });\n                    break;\n                case 'auth/invalid-email':\n                    updateErrorMessage({ ...errorMessage, message: 'Email address is invalid.' });\n                    break;\n                case 'auth/operation-not-allowed':\n                    updateErrorMessage({ ...errorMessage, message: 'Error during sign up.' });\n                    break;\n                case 'auth/weak-password':\n                    updateErrorMessage({ ...errorMessage, message: 'Password is not strong enough. Add additional characters including special characters and numbers.' });\n                    break;\n                case 'auth/wrong-password':\n                    updateErrorMessage({ ...errorMessage, message: 'Password is wrong' });\n                    break;\n                case 'auth/user-not-found':\n                    updateErrorMessage({ ...errorMessage, message: 'User not found, try with your google account instead' });\n                    break;\n                default:\n                    updateErrorMessage({ ...errorMessage, message: error.message });\n                    break;\n            }\n            updateError(true);\n        });\n    };\n\n    const signInWithGoogle = async (e) => {\n        e.preventDefault();\n\n        // auth.signInWithRedirect(googleProvider);\n        await auth.signInWithPopup(googleProvider)\n            .then((result) => {\n                // Email\n                const email = result.user.email;\n\n                // Firebase\n                db.collection('signInLogs').add({\n                    email,\n                    signInTime: firebase.firestore.FieldValue.serverTimestamp(),\n                });\n            })\n            .catch((error) => {\n                // Handle Errors here.\n                var errorCode = error.code;\n                var errorMessage = error.message;\n                // The email of the user's account used.\n                var email = error.email;\n                // The firebase.auth.AuthCredential type that was used.\n                var credential = error.credential;\n\n                if (errorCode) { console.error(errorCode); }\n\n                if (errorMessage) { console.error(errorMessage); }\n\n                if (email) { console.error(email); }\n\n                if (credential) { console.error(credential); }\n\n                return;\n            });\n    };\n\n    return (\n        <>\n            <div className=\"some-page-wrapper\">\n                <div className=\"row\">\n                    <div className=\"column\">\n                        <div className=\"title-column\">\n                            <div className=\"login-title\">\n                                <h1>Utility Switchboard</h1>\n                                <h1>\n                                    <span>Savings Portal</span>.\n                                </h1>\n                            </div>\n\n                            <div className=\"login-btn-container\">\n                                <button className=\"btn-login\" onClick={(e) => dispatchModal(e)}>Sign In</button>\n                            </div>\n\n                            <div className=\"modal animate__animated animate__pulse\" id=\"modal\">\n                                <form onSubmit={(e) => onSubmit(e)} className=\"modal-content\">\n\n                                    <div className=\"modal-logo\">\n                                        <img src={\"https://utilityswitchboard.com/wp-content/uploads/2021/07/usb-favicon.png\"} alt=\"\" />\n                                    </div>\n\n                                    <div className=\"form-field\">\n                                        <input\n                                            type=\"email\"\n                                            id=\"email\"\n                                            name=\"email\"\n                                            placeholder=\"Introduce email\"\n                                            value={email || ''}\n                                            onChange={onChange}\n                                            placeholder=\"Email\"\n                                            required\n                                        />\n                                    </div>\n\n                                    <div className=\"form-field\">\n                                        <input\n                                            type=\"password\"\n                                            id=\"password\"\n                                            name=\"password\"\n                                            placeholder=\"Introduce password\"\n                                            value={password || ''}\n                                            onChange={onChange}\n                                            placeholder=\"Password\"\n                                            autoComplete=\"on\"\n                                            required\n                                        />\n                                    </div>\n\n                                    {error ? (\n                                        <div className=\"error-modal\"><Error message={errorMessage.message} /></div>\n                                    ) : null}\n\n                                    <div className=\"login-btn-container\">\n                                        <button className=\"btn-login\">Sign In</button>\n                                    </div>\n\n                                    <p>Or sign in using</p>\n\n                                    <button className=\"google-btn\" onClick={(e) => signInWithGoogle(e)}>\n                                        <div>\n                                            <img className=\"google-icon\" src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" loading=\"lazy\" />\n                                        </div>\n                                    </button>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"column\">\n                        <div className=\"image-column\">\n                            <div className=\"image-container\">\n                                <img src={MoneyMan} alt=\"Saving Money\" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}