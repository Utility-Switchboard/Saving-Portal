{"ast":null,"code":"import _regeneratorRuntime from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useRef}from'react';// React Router\nimport{useHistory}from'react-router-dom';// Firebase\nimport{db,auth}from'../../firebase/firebase';import firebase from\"firebase/app\";// IdleTimer\nimport IdleTimer from'react-idle-timer';// Icons\nimport{IconContext}from\"react-icons\";import{RiTimeLine}from'react-icons/ri';// Swal\nimport swal from'@sweetalert/with-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function IdleTimerContainer(){var IdleTimerRef=useRef(null);// Histoty\nvar history=useHistory();var signOut=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return auth.signOut().then(function(){console.log('Sign-out successful.');// Redirect\n// Redirect\nhistory.push('/');}).catch(function(error){console.log('An error happened.');});case 2:return _context.abrupt(\"return\");case 3:case\"end\":return _context.stop();}}},_callee);}));return function signOut(){return _ref.apply(this,arguments);};}();var onIdle=function onIdle(){// Counter down timer\nvar timeleft=30;var counterDownTimer=setInterval(function(){if(timeleft<=0){clearInterval(counterDownTimer);}// Decresae by -1\nvar upTo=timeleft-=1;if(upTo===0){// Signout method\nsignOut();// Email\nvar email=auth.currentUser.email;// Firebase\ndb.collection('signOutLogs').add({email:email,signInTime:firebase.firestore.FieldValue.serverTimestamp()});// Check modal state\nvar isOpen=swal.getState().isOpen;// Conditional to close the modal\nif(isOpen){swal.close();}return;}},1000);swal({closeOnClickOutside:true,buttons:{confirm:\"Yes, I'm here\"},content:/*#__PURE__*/_jsxs(\"div\",{className:\"swal-text-custom\",children:[/*#__PURE__*/_jsx(IconContext.Provider,{value:{color:'#D338AE',size:'50px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"animate__animated animate__shakeX\",children:/*#__PURE__*/_jsx(RiTimeLine,{})})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Are you still there?\"})]})}).then(function(respond){if(respond===null||respond===true){clearInterval(counterDownTimer);return;}});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(IdleTimer,{ref:IdleTimerRef,timeout:360*1000,onIdle:onIdle})});}export default IdleTimerContainer;","map":{"version":3,"sources":["/Users/juanlugo/Desktop/sp-firebase/src/components/IdleTimerContainer/IdleTimerContainer.js"],"names":["React","useRef","useHistory","db","auth","firebase","IdleTimer","IconContext","RiTimeLine","swal","IdleTimerContainer","IdleTimerRef","history","signOut","then","console","log","push","catch","error","onIdle","timeleft","counterDownTimer","setInterval","clearInterval","upTo","email","currentUser","collection","add","signInTime","firestore","FieldValue","serverTimestamp","isOpen","getState","close","closeOnClickOutside","buttons","confirm","content","color","size","respond"],"mappings":"iTAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,KAA8B,OAA9B,CACA;AACA,OAASC,UAAT,KAA2B,kBAA3B,CACA;AACA,OAASC,EAAT,CAAaC,IAAb,KAAyB,yBAAzB,CACA,MAAOC,CAAAA,QAAP,KAAqB,cAArB,CACA;AACA,MAAOC,CAAAA,SAAP,KAAsB,kBAAtB,CACA;AACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,gBAA3B,CACA;AACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,C,wFAEA,QAASC,CAAAA,kBAAT,EAA8B,CAC1B,GAAMC,CAAAA,YAAY,CAAGV,MAAM,CAAC,IAAD,CAA3B,CAEA;AACA,GAAMW,CAAAA,OAAO,CAAGV,UAAU,EAA1B,CAEA,GAAMW,CAAAA,OAAO,0FAAG,yJAENT,CAAAA,IAAI,CAACS,OAAL,GAAeC,IAAf,CAAoB,UAAM,CAC5BC,OAAO,CAACC,GAAR,CAAY,sBAAZ,EACA;AAAA;AACAJ,OAAO,CAACK,IAAR,CAAa,GAAb,EACH,CAJK,EAIHC,KAJG,CAIG,SAACC,KAAD,CAAW,CAChBJ,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACH,CANK,CAFM,+FAAH,kBAAPH,CAAAA,OAAO,0CAAb,CAaA,GAAMO,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CAEjB;AACA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,gBAAgB,CAAGC,WAAW,CAAC,UAAY,CAC3C,GAAIF,QAAQ,EAAI,CAAhB,CAAmB,CACfG,aAAa,CAACF,gBAAD,CAAb,CACH,CAED;AACA,GAAIG,CAAAA,IAAI,CAAGJ,QAAQ,EAAI,CAAvB,CAEA,GAAII,IAAI,GAAK,CAAb,CAAgB,CAEZ;AACAZ,OAAO,GAEP;AACA,GAAMa,CAAAA,KAAK,CAAGtB,IAAI,CAACuB,WAAL,CAAiBD,KAA/B,CAEA;AACAvB,EAAE,CAACyB,UAAH,CAAc,aAAd,EAA6BC,GAA7B,CAAiC,CAC7BH,KAAK,CAALA,KAD6B,CAE7BI,UAAU,CAAEzB,QAAQ,CAAC0B,SAAT,CAAmBC,UAAnB,CAA8BC,eAA9B,EAFiB,CAAjC,EAKA;AACA,GAAMC,CAAAA,MAAM,CAAGzB,IAAI,CAAC0B,QAAL,GAAgBD,MAA/B,CACA;AACA,GAAIA,MAAJ,CAAY,CACRzB,IAAI,CAAC2B,KAAL,GACH,CAED,OACH,CAEJ,CAhCiC,CAgC/B,IAhC+B,CAAlC,CAkCA3B,IAAI,CAAC,CACD4B,mBAAmB,CAAE,IADpB,CAEDC,OAAO,CAAE,CACLC,OAAO,CAAE,eADJ,CAFR,CAKDC,OAAO,cACH,aAAK,SAAS,CAAC,kBAAf,wBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAT,CAAoBC,IAAI,CAAE,MAA1B,CAA7B,uBACI,YAAK,SAAS,CAAC,mCAAf,uBACI,KAAC,UAAD,IADJ,EADJ,EADJ,cAMI,4CANJ,GANH,CAAD,CAAJ,CAeG5B,IAfH,CAeQ,SAAA6B,OAAO,CAAI,CACf,GAAIA,OAAO,GAAK,IAAZ,EAAoBA,OAAO,GAAK,IAApC,CAA0C,CACtCnB,aAAa,CAACF,gBAAD,CAAb,CACA,OACH,CACJ,CApBD,EAqBH,CA3DD,CA6DA,mBACI,kCACI,KAAC,SAAD,EAAW,GAAG,CAAEX,YAAhB,CAA8B,OAAO,CAAE,IAAM,IAA7C,CAAmD,MAAM,CAAES,MAA3D,EADJ,EADJ,CAKH,CAED,cAAeV,CAAAA,kBAAf","sourcesContent":["import React, { useRef } from 'react';\n// React Router\nimport { useHistory } from 'react-router-dom';\n// Firebase\nimport { db, auth } from '../../firebase/firebase';\nimport firebase from \"firebase/app\";\n// IdleTimer\nimport IdleTimer from 'react-idle-timer';\n// Icons\nimport { IconContext } from \"react-icons\";\nimport { RiTimeLine } from 'react-icons/ri';\n// Swal\nimport swal from '@sweetalert/with-react';\n\nfunction IdleTimerContainer() {\n    const IdleTimerRef = useRef(null);\n\n    // Histoty\n    const history = useHistory();\n\n    const signOut = async () => {\n        // Sign Out - Firebase\n        await auth.signOut().then(() => {\n            console.log('Sign-out successful.');\n            // Redirect\n            history.push('/');\n        }).catch((error) => {\n            console.log('An error happened.');\n        });\n\n        return;\n    }\n\n    const onIdle = () => {\n\n        // Counter down timer\n        let timeleft = 30;\n        let counterDownTimer = setInterval(function () {\n            if (timeleft <= 0) {\n                clearInterval(counterDownTimer);\n            }\n\n            // Decresae by -1\n            let upTo = timeleft -= 1;\n\n            if (upTo === 0) {\n\n                // Signout method\n                signOut();\n\n                // Email\n                const email = auth.currentUser.email;\n\n                // Firebase\n                db.collection('signOutLogs').add({\n                    email,\n                    signInTime: firebase.firestore.FieldValue.serverTimestamp(),\n                });\n\n                // Check modal state\n                const isOpen = swal.getState().isOpen;\n                // Conditional to close the modal\n                if (isOpen) {\n                    swal.close();\n                }\n\n                return;\n            }\n\n        }, 1000);\n\n        swal({\n            closeOnClickOutside: true,\n            buttons: {\n                confirm: \"Yes, I'm here\"\n            },\n            content: (\n                <div className=\"swal-text-custom\">\n                    <IconContext.Provider value={{ color: '#D338AE', size: '50px' }}>\n                        <div className=\"animate__animated animate__shakeX\">\n                            <RiTimeLine />\n                        </div>\n                    </IconContext.Provider>\n                    <h1>Are you still there?</h1>\n                </div>\n            )\n        }).then(respond => {\n            if (respond === null || respond === true) {\n                clearInterval(counterDownTimer);\n                return;\n            }\n        });\n    }\n\n    return (\n        <div>\n            <IdleTimer ref={IdleTimerRef} timeout={360 * 1000} onIdle={onIdle}></IdleTimer>\n        </div>\n    )\n}\n\nexport default IdleTimerContainer\n"]},"metadata":{},"sourceType":"module"}