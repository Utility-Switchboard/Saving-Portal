{"ast":null,"code":"import _regeneratorRuntime from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/juanlugo/Desktop/sp-firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./FormMpanMprn.css\";// Firebase\nimport{db}from\"../../../firebase/firebase\";import firebase from\"firebase/app\";// Images\nimport Search from'../../../assets/img/search.png';// Swal\nimport swal from'@sweetalert/with-react';// Icons\nimport{IconContext}from\"react-icons\";import{ImSad}from'react-icons/im';import{IoMdArrowDropleft,IoMdArrowDropright}from'react-icons/io';import{FaRegEdit}from\"react-icons/fa\";// Components\nimport FormScript from'../FormScript/FormScript';import FormAssistant from'../FormAssistant/FormAssistant';import Error from'../../Error/Error';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function FormMpanMprn(_ref){var customerAddres=_ref.customerAddres,electricityInformation=_ref.electricityInformation,gasInformation=_ref.gasInformation,customerInformation=_ref.customerInformation,useGas=_ref.useGas,fuel=_ref.fuel,progressBar=_ref.progressBar,showScript=_ref.showScript,updateCustomerAddress=_ref.updateCustomerAddress,updateElectricityInformation=_ref.updateElectricityInformation,updateGasInformation=_ref.updateGasInformation,updateCustomerInformation=_ref.updateCustomerInformation,updateProgressBar=_ref.updateProgressBar,updateShowFormMpanMprn=_ref.updateShowFormMpanMprn,updateShowFormSupply=_ref.updateShowFormSupply,updateShowFomrFuelType=_ref.updateShowFomrFuelType,updateShowOverlay=_ref.updateShowOverlay;/* STATES */ // Edit\nvar _useState=useState(true),_useState2=_slicedToArray(_useState,2),editMPAN=_useState2[0],updateEditMPAN=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),editMPRN=_useState4[0],updateEditMPRN=_useState4[1];// Search by MPAN\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),searchByMPAN=_useState6[0],updateSearchByMPAN=_useState6[1];// Search by MPRN\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),serachByMPRN=_useState8[0],updateSearchByMPRN=_useState8[1];// Error MPAN\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),error_mpan=_useState10[0],updateError_mpan=_useState10[1];// Error MPRN\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),error_mprn=_useState12[0],updateError_mprn=_useState12[1];// Button focus animation - MPAN\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),focusAnimationMpan=_useState14[0],setFocusAnimationMpan=_useState14[1];// Button focus animation - MPRN\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),focusAnimationMprn=_useState16[0],setFocusAnimationMprn=_useState16[1];/* FUNCTIONS */ // Scroll to top\nuseEffect(function(){window.scrollTo({top:0,behavior:'smooth'});},[]);// Variables\nvar mpan=customerAddres.mpan;var mprn=customerAddres.mprn;var supplier_mpid=electricityInformation.MPANDetails.supplier_mpid;var current_supplier_id=gasInformation.dataGas.current_supplier_id;var dual_active=customerInformation.fuel_description.dual_active;var gas_only=customerInformation.fuel_description.gas_only;var elec_only=customerInformation.fuel_description.elec_only;var same_supplier=customerInformation.fuel_description.same_supplier;var postcode_formatted=customerAddres.postcode.replace(/\\s/g,'').trim().toLowerCase();var doornumber_formatted=customerAddres.doornumber.replace(/\\s/g,'').trim().toLowerCase();var uid=\"\".concat(postcode_formatted,\"-\").concat(doornumber_formatted);// Function to check if the first request to the ECOES API comes with data\nuseEffect(function(){if(supplier_mpid!==''){updateSearchByMPAN(false);}else{updateSearchByMPAN(true);}},[]);// Function to check if the first request to the XOSERVE API comes with data\nuseEffect(function(){if(current_supplier_id!==''){updateSearchByMPRN(false);}else{updateSearchByMPRN(true);}},[]);// Function that runs every time the user writes to the input\nvar handleChange=function handleChange(e){// Update valus for MPAN and MPRN\nupdateCustomerAddress(_objectSpread(_objectSpread({},customerAddres),{},_defineProperty({},e.target.name,e.target.value.replace(/[^\\w\\s]/gi,'').trim())));};// Go to Supply Information\nvar goToSupplyInformation=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var swal_es,swal_gs,swal_es_gs,dispatch_swal_es,dispatch_swal_gs,swal_checker_es,swal_checker_gs,ecoes_api,xoserve_api,detailsParameters,responseECOESDetails,responseXOSERVE;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// Show Overlay\nupdateShowOverlay(true);/**-- Swal alert-- */swal_es=function swal_es(){swal({closeOnClickOutside:false,buttons:{cancel:{text:\"Go back\",value:false,visible:true}},content:/*#__PURE__*/_jsxs(\"div\",{className:\"swal-text-custom\",children:[/*#__PURE__*/_jsx(IconContext.Provider,{value:{color:'#D338AE',size:'50px'},children:/*#__PURE__*/_jsx(ImSad,{})}),/*#__PURE__*/_jsx(\"h1\",{children:\"No results found for electricity supplier...\"})]})});};swal_gs=function swal_gs(){swal({closeOnClickOutside:false,buttons:{cancel:{text:\"Go back\",value:false,visible:true}},content:/*#__PURE__*/_jsxs(\"div\",{className:\"swal-text-custom\",children:[/*#__PURE__*/_jsx(IconContext.Provider,{value:{color:'#D338AE',size:'50px'},children:/*#__PURE__*/_jsx(ImSad,{})}),/*#__PURE__*/_jsx(\"h1\",{children:\"No results found for gas supplier...\"})]})});};swal_es_gs=function swal_es_gs(){swal({closeOnClickOutside:false,buttons:{cancel:{text:\"Go back\",value:false,visible:true}},content:/*#__PURE__*/_jsxs(\"div\",{className:\"swal-text-custom\",children:[/*#__PURE__*/_jsx(IconContext.Provider,{value:{color:'#D338AE',size:'50px'},children:/*#__PURE__*/_jsx(ImSad,{})}),/*#__PURE__*/_jsx(\"h1\",{children:\"No results found...\"})]})});};// Conditional Swal ES\nswal_checker_es=function swal_checker_es(swal_es_dispatch){dispatch_swal_es=swal_es_dispatch;return swal_es_dispatch;};// Conditional Swal GS\nswal_checker_gs=function swal_checker_gs(swal_gs_dispatch){dispatch_swal_gs=swal_gs_dispatch;return swal_gs_dispatch;};// ecoes_api\necoes_api=process.env.REACT_APP_ECOES_API;// xoserve_api\nxoserve_api=process.env.REACT_APP_XOSERVE_API;// Fetch ECOES API\nif(!searchByMPAN){_context.next=19;break;}if(!(mpan!=='')){_context.next=19;break;}if(!(mpan.length<13)){_context.next=15;break;}if(mpan.length<13&&mprn.length<10){// Show error MPAN\nupdateError_mpan(true);// Show error MPRN\nupdateError_mprn(true);if(mprn.length===0){// Hidde error MPRN\nupdateError_mprn(false);}}else{// Show error MPAN\nupdateError_mpan(true);}// Hidde Overlay\nupdateShowOverlay(false);return _context.abrupt(\"return\");case 15:/**-- Response ECOES DETAILS by MPAN--  */ // Body parameters\ndetailsParameters={\"Authentication\":{\"Key\":ecoes_api},\"ParameterSets\":[{\"Parameters\":[{\"Key\":\"MPAN\",\"Value\":mpan}]}]};_context.next=18;return fetch('https://cors-anywhere.herokuapp.com/https://www.ecoes.co.uk/WebServices/Trial/ECOESAPI.svc/RESTful/JSON/GetTechnicalDetailsByMpan',{method:'POST',body:JSON.stringify(detailsParameters),headers:{'Content-Type':'application/json'}}).then(function(response){if(response.status===200){return response.json();}else{return console.error('An error ocurred fetching to GetTechnicalDetailsByMpan');}}).then(function(response){if(response!==undefined){// Error response\nvar error_response=response.Results[0].Errors.length;// Check values and return \n// Check values and return \nif(error_response>=1){// Electricity Infomartion values\nvar MPANDetails={mpan_core:'',meter_serial_number:'',meter_type:'',supplier_mpid:''};// Update the state\n// Update the state\nupdateElectricityInformation(_objectSpread(_objectSpread({},electricityInformation),{},{MPANDetails:MPANDetails}));}else{// Extract the values from the response\nvar meter_serial_number=response.Results[0].UtilityMatches[0].Meters[0].MeterDetails[1].Value;var meter_type=response.Results[0].UtilityMatches[0].Meters[0].MeterDetails[2].Value;var _supplier_mpid=response.Results[0].UtilityMatches[0].UtilityDetails[11].Value;// Assign values\n// Assign values\nvar _MPANDetails={mpan_core:mpan,meter_serial_number:meter_serial_number,meter_type:meter_type,supplier_mpid:_supplier_mpid};// Update the state\n// Update the state\nupdateElectricityInformation(_objectSpread(_objectSpread({},electricityInformation),{},{MPANDetails:_MPANDetails}));}}else{// Show alert\nswal_checker_es(true);// Electricity Infomartion values\n// Electricity Infomartion values\nvar _MPANDetails2={mpan_core:'',meter_serial_number:'',meter_type:'',supplier_mpid:''};// Update the state\n// Update the state\nreturn updateElectricityInformation(_objectSpread(_objectSpread({},electricityInformation),{},{MPANDetails:_MPANDetails2}));}}).catch(function(error){console.error(error);// Show alert\n// Show alert\nswal_checker_es(true);});case 18:responseECOESDetails=_context.sent;case 19:if(!serachByMPRN){_context.next=28;break;}if(!(mprn!=='')){_context.next=28;break;}if(!(mprn.length<10)){_context.next=25;break;}if(mprn.length<10&&mpan.length<13){// Show error MPRN\nupdateError_mprn(true);// Show error MPAN\nupdateError_mpan(true);if(mpan.length===0){// Hidde error MPAN\nupdateError_mpan(false);}}else{// Show error MPRN\nupdateError_mprn(true);}// Hidde Overlay\nupdateShowOverlay(false);return _context.abrupt(\"return\");case 25:_context.next=27;return fetch(\"https://cors-anywhere.herokuapp.com/https://xoserve.apimanagement.hana.ondemand.com:443/v1/switchdataTBB.svc?&mprn='\".concat(mprn,\"'\"),{method:'GET',headers:{'Content-Type':'application/json','APIKey':xoserve_api}}).then(function(response){if(response.status===200){return response.json();}else{updateGasInformation(_objectSpread(_objectSpread({},gasInformation),{},{dataGas:{mprn:'',meter_mechanism_code:'',current_supplier_id:'',gas_transport_id:''}}));return console.error('An error ocurred fetching to Xoserve switchdataTBB');}}).then(function(response){// console.log(response);\n// If exist information about the property \nvar success=response.hasOwnProperty('mprn');if(success===true){var dataGas=response.mprn[0];var mprn_core=response.mprn[0].mprn;updateGasInformation(_objectSpread(_objectSpread({},gasInformation),{},{dataGas:dataGas}));return mprn_core;}else{// Show alert\nswal_checker_gs(true);return updateGasInformation(_objectSpread(_objectSpread({},gasInformation),{},{dataGas:{mprn:'',meter_mechanism_code:'',current_supplier_id:'',gas_transport_id:''}}));}}).catch(function(error){// Show alert\nswal_checker_gs(true);return console.error('Catch an error fetching to Xoserve switchdataTBB:'+' '+error);});case 27:responseXOSERVE=_context.sent;case 28:if((dispatch_swal_es&&dispatch_swal_gs)===true){swal_es_gs();}else{if(dispatch_swal_es===true){swal_es();}if(dispatch_swal_gs===true){swal_gs();}}// Update progress bar\nupdateProgressBar(_objectSpread(_objectSpread({},progressBar),{},{step:4}));// Hidde MPAN/MPRN\nupdateShowFormMpanMprn(false);// Show Overlay\nupdateShowOverlay(false);// Show Form Supply\nupdateShowFormSupply(true);case 33:case\"end\":return _context.stop();}}},_callee);}));return function goToSupplyInformation(_x){return _ref2.apply(this,arguments);};}();var goBack=function goBack(e){e.preventDefault();// Update progress bar\nupdateProgressBar(_objectSpread(_objectSpread({},progressBar),{},{step:2}));// Update state\nvar copy_customerInformation=_objectSpread({},customerInformation);delete copy_customerInformation['fuel_description'];updateCustomerInformation(_objectSpread({},copy_customerInformation));// Hidde error \nupdateError_mpan(false);updateError_mprn(false);// Hidde MPAN/MPRN\nupdateShowFormMpanMprn(false);// Show Fuetl Type\nupdateShowFomrFuelType(true);/**-- Firebase --*/ // Update customer information in firebase\ndb.collection(\"customers\").doc(uid).set({created:firebase.firestore.FieldValue.serverTimestamp(),step:2,customerAddres:{doornumber:customerAddres.doornumber?customerAddres.doornumber:'',addressline1:customerAddres.addressline1?customerAddres.addressline1:'',addressline2:customerAddres.addressline2?customerAddres.addressline2:'',city:customerAddres.city?customerAddres.city:'',postcode:customerAddres.postcode?customerAddres.postcode:'',mpan:electricityInformation.MPANDetails.mpan_core?electricityInformation.MPANDetails.mpan_core:'',mprn:gasInformation.dataGas.mprn?gasInformation.dataGas.mprn:''},MPANDetails:{meter_serial_number:electricityInformation.MPANDetails.meter_serial_number?electricityInformation.MPANDetails.meter_serial_number:'',meter_type:electricityInformation.MPANDetails.meter_type?electricityInformation.MPANDetails.meter_type:'',mpan_core:electricityInformation.MPANDetails.mpan_core?electricityInformation.MPANDetails.mpan_core:'',supplier_mpid:electricityInformation.MPANDetails.supplier_mpid?electricityInformation.MPANDetails.supplier_mpid:''},dataGas:{mprn:gasInformation.dataGas.mprn?gasInformation.dataGas.mprn:'',meter_mechanism_code:gasInformation.dataGas.meter_mechanism_code?gasInformation.dataGas.meter_mechanism_code:'',current_supplier_id:gasInformation.dataGas.current_supplier_id?gasInformation.dataGas.current_supplier_id:'',gas_transport_id:gasInformation.dataGas.gas_transport_id?gasInformation.dataGas.gas_transport_id:''}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"section\",{className:\"form-mpanmprn-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-mpanmprn-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-mpanmprn-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-mpanmprn\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"We need your \",elec_only?'MPAN':null,\" \",gas_only?'MPRN':null,\" \",dual_active?same_supplier?\"MPAN\":'MPAN & MPRN':null]}),elec_only?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Meter Point Administration Number (MPAN)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-mpanmprn-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-mpanmprn-input\",name:\"mpan\",placeholder:mpan===''?'Introduce MPAN':'',value:mpan,onChange:function onChange(e){return handleChange(e);},disabled:editMPAN,onPointerDown:function onPointerDown(){return editMPAN?setFocusAnimationMpan(!focusAnimationMpan):null;}}),/*#__PURE__*/_jsx(FaRegEdit,{className:focusAnimationMpan?'edit-search-icon animate__animated animate__headShake':'edit-search-icon',onClick:function onClick(){return updateEditMPAN(!editMPAN);}})]}),error_mpan?/*#__PURE__*/_jsx(Error,{message:'Please, enter a valid MPAN number.'}):null]}):null,gas_only?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Meter Point Reference Number (MPRN)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-mpanmprn-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-mpanmprn-input\",name:\"mprn\",placeholder:mprn===''?'Introduce MPRN':'',value:mprn,onChange:function onChange(e){return handleChange(e);},disabled:editMPRN,onPointerDown:function onPointerDown(){return editMPRN?setFocusAnimationMprn(!focusAnimationMprn):null;}}),/*#__PURE__*/_jsx(FaRegEdit,{className:focusAnimationMprn?'edit-search-icon animate__animated animate__headShake':'edit-search-icon',onClick:function onClick(){return updateEditMPRN(!editMPRN);}})]}),error_mprn?/*#__PURE__*/_jsx(Error,{message:'Please, enter a valid MPRN number.'}):null]}):null,dual_active?// Same supplier\nsame_supplier?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Meter Point Administration Number (MPAN)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-mpanmprn-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-mpanmprn-input\",name:\"mpan\",placeholder:mpan===''?'Introduce MPAN':'',value:mpan,onChange:function onChange(e){return handleChange(e);},disabled:editMPAN,onPointerDown:function onPointerDown(){return editMPAN?setFocusAnimationMpan(!focusAnimationMpan):null;}}),/*#__PURE__*/_jsx(FaRegEdit,{className:focusAnimationMpan?'edit-search-icon animate__animated animate__headShake':'edit-search-icon',onClick:function onClick(){return updateEditMPAN(!editMPAN);}})]}),error_mpan?/*#__PURE__*/_jsx(Error,{message:'Please, enter a valid MPAN number.'}):null]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Meter Point Administration Number (MPAN)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-mpanmprn-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-mpanmprn-input\",name:\"mpan\",placeholder:mpan===''?'Introduce MPAN':'',value:mpan,onChange:function onChange(e){return handleChange(e);},disabled:editMPAN,onPointerDown:function onPointerDown(){return editMPAN?setFocusAnimationMpan(!focusAnimationMpan):null;}}),/*#__PURE__*/_jsx(FaRegEdit,{className:focusAnimationMpan?'edit-search-icon animate__animated animate__headShake':'edit-search-icon',onClick:function onClick(){return updateEditMPAN(!editMPAN);}})]}),error_mpan?/*#__PURE__*/_jsx(Error,{message:'Please, enter a valid MPAN number.'}):null,/*#__PURE__*/_jsx(\"p\",{children:\"Meter Point Reference Number (MPRN)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-mpanmprn-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-mpanmprn-input\",name:\"mprn\",placeholder:mprn===''?'Introduce MPRN':'',value:mprn,onChange:function onChange(e){return handleChange(e);},disabled:editMPRN,onPointerDown:function onPointerDown(){return editMPRN?setFocusAnimationMprn(!focusAnimationMprn):null;}}),/*#__PURE__*/_jsx(FaRegEdit,{className:focusAnimationMprn?'edit-search-icon animate__animated animate__headShake':'edit-search-icon',onClick:function onClick(){return updateEditMPRN(!editMPRN);}})]}),error_mprn?/*#__PURE__*/_jsx(Error,{message:'Please, enter a valid MPRN number.'}):null]}):null]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-mpanmprn-img\",children:/*#__PURE__*/_jsx(\"img\",{src:Search,alt:\"\",width:\"80\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-mpanmprn-btn-container\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"form-mpanmprn-btn btn-back\",onClick:function onClick(e){return goBack(e);},children:[/*#__PURE__*/_jsx(IconContext.Provider,{value:{color:'#D338AE',size:'35px'},children:/*#__PURE__*/_jsx(IoMdArrowDropleft,{className:\"icon-back\"})}),\"Go back\"]}),/*#__PURE__*/_jsxs(\"button\",{\"data-cy\":\"mpanmprn-continue\",className:\"form-mpanmprn-btn btn-next\",onClick:function onClick(e){return goToSupplyInformation(e);},children:[\"Continue\",/*#__PURE__*/_jsx(IconContext.Provider,{value:{color:'#FFF',size:'35px'},children:/*#__PURE__*/_jsx(IoMdArrowDropright,{className:\"icon-next\"})})]})]})]}),showScript?/*#__PURE__*/_jsxs(\"div\",{className:\"helper-mpanmprn\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"script-mpanmprn\",children:/*#__PURE__*/_jsx(FormScript,{step:4})}),/*#__PURE__*/_jsx(\"div\",{className:\"assistant-mpanmprn-custom\",children:/*#__PURE__*/_jsx(FormAssistant,{tips:3})})]}):/*#__PURE__*/_jsx(\"div\",{style:{width:'100%'},children:/*#__PURE__*/_jsx(\"div\",{className:\"assistant-mpanmprn\",children:/*#__PURE__*/_jsx(FormAssistant,{tips:3})})})]})})});}export default FormMpanMprn;","map":{"version":3,"sources":["/Users/juanlugo/Desktop/sp-firebase/src/components/FormCards/FormMPN-MPRN/FormMpanMprn.jsx"],"names":["React","useState","useEffect","db","firebase","Search","swal","IconContext","ImSad","IoMdArrowDropleft","IoMdArrowDropright","FaRegEdit","FormScript","FormAssistant","Error","FormMpanMprn","customerAddres","electricityInformation","gasInformation","customerInformation","useGas","fuel","progressBar","showScript","updateCustomerAddress","updateElectricityInformation","updateGasInformation","updateCustomerInformation","updateProgressBar","updateShowFormMpanMprn","updateShowFormSupply","updateShowFomrFuelType","updateShowOverlay","editMPAN","updateEditMPAN","editMPRN","updateEditMPRN","searchByMPAN","updateSearchByMPAN","serachByMPRN","updateSearchByMPRN","error_mpan","updateError_mpan","error_mprn","updateError_mprn","focusAnimationMpan","setFocusAnimationMpan","focusAnimationMprn","setFocusAnimationMprn","window","scrollTo","top","behavior","mpan","mprn","supplier_mpid","MPANDetails","current_supplier_id","dataGas","dual_active","fuel_description","gas_only","elec_only","same_supplier","postcode_formatted","postcode","replace","trim","toLowerCase","doornumber_formatted","doornumber","uid","handleChange","e","target","name","value","goToSupplyInformation","preventDefault","swal_es","closeOnClickOutside","buttons","cancel","text","visible","content","color","size","swal_gs","swal_es_gs","swal_checker_es","swal_es_dispatch","dispatch_swal_es","swal_checker_gs","swal_gs_dispatch","dispatch_swal_gs","ecoes_api","process","env","REACT_APP_ECOES_API","xoserve_api","REACT_APP_XOSERVE_API","length","detailsParameters","fetch","method","body","JSON","stringify","headers","then","response","status","json","console","error","undefined","error_response","Results","Errors","mpan_core","meter_serial_number","meter_type","UtilityMatches","Meters","MeterDetails","Value","UtilityDetails","catch","responseECOESDetails","meter_mechanism_code","gas_transport_id","success","hasOwnProperty","mprn_core","responseXOSERVE","step","goBack","copy_customerInformation","collection","doc","set","created","firestore","FieldValue","serverTimestamp","addressline1","addressline2","city","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./FormMpanMprn.css\";\n// Firebase\nimport { db } from \"../../../firebase/firebase\";\nimport firebase from \"firebase/app\";\n// Images\nimport Search from '../../../assets/img/search.png';\n// Swal\nimport swal from '@sweetalert/with-react';\n// Icons\nimport { IconContext } from \"react-icons\";\nimport { ImSad } from 'react-icons/im';\nimport { IoMdArrowDropleft, IoMdArrowDropright } from 'react-icons/io';\nimport { FaRegEdit } from \"react-icons/fa\";\n\n// Components\nimport FormScript from '../FormScript/FormScript';\nimport FormAssistant from '../FormAssistant/FormAssistant';\nimport Error from '../../Error/Error';\n\nfunction FormMpanMprn({ customerAddres, electricityInformation, gasInformation, customerInformation, useGas, fuel, progressBar, showScript, updateCustomerAddress, updateElectricityInformation, updateGasInformation, updateCustomerInformation, updateProgressBar, updateShowFormMpanMprn, updateShowFormSupply, updateShowFomrFuelType, updateShowOverlay }) {\n  /* STATES */\n  // Edit\n  const [editMPAN, updateEditMPAN] = useState(true);\n  const [editMPRN, updateEditMPRN] = useState(true);\n  // Search by MPAN\n  const [searchByMPAN, updateSearchByMPAN] = useState(false);\n  // Search by MPRN\n  const [serachByMPRN, updateSearchByMPRN] = useState(false);\n  // Error MPAN\n  const [error_mpan, updateError_mpan] = useState(false);\n  // Error MPRN\n  const [error_mprn, updateError_mprn] = useState(false);\n  // Button focus animation - MPAN\n  const [focusAnimationMpan, setFocusAnimationMpan] = useState(false);\n  // Button focus animation - MPRN\n  const [focusAnimationMprn, setFocusAnimationMprn] = useState(false);\n\n  /* FUNCTIONS */\n  // Scroll to top\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }, []);\n\n  // Variables\n  const mpan = customerAddres.mpan;\n  const mprn = customerAddres.mprn;\n  const supplier_mpid = electricityInformation.MPANDetails.supplier_mpid;\n  const current_supplier_id = gasInformation.dataGas.current_supplier_id;\n  const dual_active = customerInformation.fuel_description.dual_active;\n  const gas_only = customerInformation.fuel_description.gas_only;\n  const elec_only = customerInformation.fuel_description.elec_only;\n  const same_supplier = customerInformation.fuel_description.same_supplier;\n  const postcode_formatted = customerAddres.postcode.replace(/\\s/g, '').trim().toLowerCase();\n  const doornumber_formatted = customerAddres.doornumber.replace(/\\s/g, '').trim().toLowerCase();\n  const uid = `${postcode_formatted}-${doornumber_formatted}`;\n\n  // Function to check if the first request to the ECOES API comes with data\n  useEffect(() => {\n    if (supplier_mpid !== '') {\n      updateSearchByMPAN(false);\n    } else {\n      updateSearchByMPAN(true);\n    }\n  }, []);\n\n  // Function to check if the first request to the XOSERVE API comes with data\n  useEffect(() => {\n    if (current_supplier_id !== '') {\n      updateSearchByMPRN(false);\n    } else {\n      updateSearchByMPRN(true);\n    }\n  }, []);\n\n  // Function that runs every time the user writes to the input\n  const handleChange = (e) => {\n    // Update valus for MPAN and MPRN\n    updateCustomerAddress({\n      ...customerAddres,\n      [e.target.name]: e.target.value.replace(/[^\\w\\s]/gi, '').trim(),\n    });\n  };\n\n  // Go to Supply Information\n  const goToSupplyInformation = async (e) => {\n    e.preventDefault();\n\n    // Show Overlay\n    updateShowOverlay(true);\n\n    /**-- Swal alert-- */\n    const swal_es = () => {\n      swal({\n        closeOnClickOutside: false,\n        buttons: {\n          cancel: {\n            text: \"Go back\",\n            value: false,\n            visible: true\n          }\n        },\n        content: (\n          <div className=\"swal-text-custom\">\n            <IconContext.Provider value={{ color: '#D338AE', size: '50px' }}>\n              <ImSad />\n            </IconContext.Provider>\n            <h1>No results found for electricity supplier...</h1>\n          </div>\n        )\n      });\n    }\n\n    const swal_gs = () => {\n      swal({\n        closeOnClickOutside: false,\n        buttons: {\n          cancel: {\n            text: \"Go back\",\n            value: false,\n            visible: true\n          }\n        },\n        content: (\n          <div className=\"swal-text-custom\">\n            <IconContext.Provider value={{ color: '#D338AE', size: '50px' }}>\n              <ImSad />\n            </IconContext.Provider>\n            <h1>No results found for gas supplier...</h1>\n          </div>\n        )\n      });\n    }\n\n    const swal_es_gs = () => {\n      swal({\n        closeOnClickOutside: false,\n        buttons: {\n          cancel: {\n            text: \"Go back\",\n            value: false,\n            visible: true\n          }\n        },\n        content: (\n          <div className=\"swal-text-custom\">\n            <IconContext.Provider value={{ color: '#D338AE', size: '50px' }}>\n              <ImSad />\n            </IconContext.Provider>\n            <h1>No results found...</h1>\n          </div>\n        )\n      });\n    }\n\n    let dispatch_swal_es;\n    let dispatch_swal_gs;\n\n    // Conditional Swal ES\n    const swal_checker_es = (swal_es_dispatch) => {\n      dispatch_swal_es = swal_es_dispatch;\n      return swal_es_dispatch;\n    }\n\n    // Conditional Swal GS\n    const swal_checker_gs = (swal_gs_dispatch) => {\n      dispatch_swal_gs = swal_gs_dispatch;\n      return swal_gs_dispatch\n    }\n\n    // ecoes_api\n    const ecoes_api = process.env.REACT_APP_ECOES_API;\n    // xoserve_api\n    const xoserve_api = process.env.REACT_APP_XOSERVE_API;\n\n    // Fetch ECOES API\n    if (searchByMPAN) {\n      if (mpan !== '') {\n        // MPAN Validation - MinLength = 13 digits\n        if (mpan.length < 13) {\n          if ((mpan.length < 13) && ((mprn.length < 10))) {\n            // Show error MPAN\n            updateError_mpan(true);\n            // Show error MPRN\n            updateError_mprn(true);\n\n            if (mprn.length === 0) {\n              // Hidde error MPRN\n              updateError_mprn(false);\n            }\n          } else {\n            // Show error MPAN\n            updateError_mpan(true);\n          }\n\n          // Hidde Overlay\n          updateShowOverlay(false);\n          return;\n        }\n\n        /**-- Response ECOES DETAILS by MPAN--  */\n        // Body parameters\n        const detailsParameters = {\n          \"Authentication\": {\n            \"Key\": ecoes_api\n          },\n          \"ParameterSets\": [{\n            \"Parameters\": [{\n              \"Key\": \"MPAN\",\n              \"Value\": mpan\n            }]\n          }]\n        }\n\n        const responseECOESDetails = await fetch('https://cors-anywhere.herokuapp.com/https://www.ecoes.co.uk/WebServices/Trial/ECOESAPI.svc/RESTful/JSON/GetTechnicalDetailsByMpan', {\n          method: 'POST',\n          body: JSON.stringify(detailsParameters),\n          headers: {\n            'Content-Type': 'application/json'\n          },\n        }).then(function (response) {\n          if (response.status === 200) {\n            return response.json();\n          } else {\n            return console.error('An error ocurred fetching to GetTechnicalDetailsByMpan');\n          }\n        }).then(function (response) {\n          if (response !== undefined) {\n            // Error response\n            const error_response = response.Results[0].Errors.length;\n            // Check values and return \n            if (error_response >= 1) {\n              // Electricity Infomartion values\n              const MPANDetails = {\n                mpan_core: '',\n                meter_serial_number: '',\n                meter_type: '',\n                supplier_mpid: ''\n              }\n\n              // Update the state\n              updateElectricityInformation({ ...electricityInformation, MPANDetails });\n            } else {\n              // Extract the values from the response\n              const meter_serial_number = response.Results[0].UtilityMatches[0].Meters[0].MeterDetails[1].Value;\n              const meter_type = response.Results[0].UtilityMatches[0].Meters[0].MeterDetails[2].Value;\n              const supplier_mpid = response.Results[0].UtilityMatches[0].UtilityDetails[11].Value;\n              // Assign values\n              const MPANDetails = {\n                mpan_core: mpan,\n                meter_serial_number,\n                meter_type,\n                supplier_mpid\n              }\n              // Update the state\n              updateElectricityInformation({ ...electricityInformation, MPANDetails });\n            }\n          } else {\n            // Show alert\n            swal_checker_es(true);\n\n            // Electricity Infomartion values\n            const MPANDetails = {\n              mpan_core: '',\n              meter_serial_number: '',\n              meter_type: '',\n              supplier_mpid: ''\n            }\n            // Update the state\n            return updateElectricityInformation({ ...electricityInformation, MPANDetails });\n          }\n        }).catch(error => {\n          console.error(error);\n          // Show alert\n          swal_checker_es(true);\n        });\n      }\n    }\n\n    // Fetch XOSERVE API\n    if (serachByMPRN) {\n      if (mprn !== '') {\n        // MPRN Validation - MinLength = 10 digits\n        if (mprn.length < 10) {\n          if ((mprn.length < 10) && ((mpan.length < 13))) {\n            // Show error MPRN\n            updateError_mprn(true);\n            // Show error MPAN\n            updateError_mpan(true);\n\n            if (mpan.length === 0) {\n              // Hidde error MPAN\n              updateError_mpan(false);\n            }\n          } else {\n            // Show error MPRN\n            updateError_mprn(true);\n          }\n\n          // Hidde Overlay\n          updateShowOverlay(false);\n          return;\n        }\n\n        /** -- XOSERVE API -- */\n        const responseXOSERVE = await fetch(`https://cors-anywhere.herokuapp.com/https://xoserve.apimanagement.hana.ondemand.com:443/v1/switchdataTBB.svc?&mprn='${mprn}'`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'APIKey': xoserve_api\n          },\n        }).then(function (response) {\n          if (response.status === 200) {\n            return response.json();\n          } else {\n            updateGasInformation({\n              ...gasInformation,\n              dataGas: {\n                mprn: '',\n                meter_mechanism_code: '',\n                current_supplier_id: '',\n                gas_transport_id: ''\n              }\n            });\n            return console.error('An error ocurred fetching to Xoserve switchdataTBB');\n          }\n        }).then(function (response) {\n          // console.log(response);\n          // If exist information about the property \n          const success = response.hasOwnProperty('mprn');\n\n          if (success === true) {\n            const dataGas = response.mprn[0];\n            const mprn_core = response.mprn[0].mprn;\n            updateGasInformation({ ...gasInformation, dataGas });\n            return mprn_core;\n          } else {\n            // Show alert\n            swal_checker_gs(true);\n            return updateGasInformation({\n              ...gasInformation,\n              dataGas: {\n                mprn: '',\n                meter_mechanism_code: '',\n                current_supplier_id: '',\n                gas_transport_id: ''\n              }\n            });\n          }\n        }).catch(function (error) {\n          // Show alert\n          swal_checker_gs(true);\n          return console.error('Catch an error fetching to Xoserve switchdataTBB:' + ' ' + error);\n        });\n      }\n    }\n\n    if ((dispatch_swal_es && dispatch_swal_gs) === true) {\n      swal_es_gs();\n    } else {\n      if (dispatch_swal_es === true) {\n        swal_es();\n      }\n\n      if (dispatch_swal_gs === true) {\n        swal_gs();\n      }\n    }\n    // Update progress bar\n    updateProgressBar({\n      ...progressBar,\n      step: 4\n    });\n    // Hidde MPAN/MPRN\n    updateShowFormMpanMprn(false);\n    // Show Overlay\n    updateShowOverlay(false);\n    // Show Form Supply\n    updateShowFormSupply(true);\n  }\n\n  const goBack = (e) => {\n    e.preventDefault();\n\n    // Update progress bar\n    updateProgressBar({\n      ...progressBar,\n      step: 2\n    });\n    // Update state\n    const copy_customerInformation = { ...customerInformation };\n    delete copy_customerInformation['fuel_description'];\n    updateCustomerInformation({\n      ...copy_customerInformation\n    });\n    // Hidde error \n    updateError_mpan(false);\n    updateError_mprn(false);\n    // Hidde MPAN/MPRN\n    updateShowFormMpanMprn(false);\n    // Show Fuetl Type\n    updateShowFomrFuelType(true);\n\n    /**-- Firebase --*/\n\n    // Update customer information in firebase\n    db.collection(\"customers\").doc(uid).set({\n      created: firebase.firestore.FieldValue.serverTimestamp(),\n      step: 2,\n      customerAddres: {\n        doornumber: customerAddres.doornumber ? customerAddres.doornumber : '',\n        addressline1: customerAddres.addressline1 ? customerAddres.addressline1 : '',\n        addressline2: customerAddres.addressline2 ? customerAddres.addressline2 : '',\n        city: customerAddres.city ? customerAddres.city : '',\n        postcode: customerAddres.postcode ? customerAddres.postcode : '',\n        mpan: electricityInformation.MPANDetails.mpan_core ? electricityInformation.MPANDetails.mpan_core : '',\n        mprn: gasInformation.dataGas.mprn ? gasInformation.dataGas.mprn : ''\n      },\n      MPANDetails: {\n        meter_serial_number: electricityInformation.MPANDetails.meter_serial_number ? electricityInformation.MPANDetails.meter_serial_number : '',\n        meter_type: electricityInformation.MPANDetails.meter_type ? electricityInformation.MPANDetails.meter_type : '',\n        mpan_core: electricityInformation.MPANDetails.mpan_core ? electricityInformation.MPANDetails.mpan_core : '',\n        supplier_mpid: electricityInformation.MPANDetails.supplier_mpid ? electricityInformation.MPANDetails.supplier_mpid : ''\n      },\n      dataGas: {\n        mprn: gasInformation.dataGas.mprn ? gasInformation.dataGas.mprn : '',\n        meter_mechanism_code: gasInformation.dataGas.meter_mechanism_code ? gasInformation.dataGas.meter_mechanism_code : '',\n        current_supplier_id: gasInformation.dataGas.current_supplier_id ? gasInformation.dataGas.current_supplier_id : '',\n        gas_transport_id: gasInformation.dataGas.gas_transport_id ? gasInformation.dataGas.gas_transport_id : ''\n      }\n    });\n  }\n\n  return (\n    <>\n      <section className=\"form-mpanmprn-section\">\n        <div className=\"form-mpanmprn-container\">\n          <div className=\"form-mpanmprn-content\">\n            <div className=\"form-mpanmprn\">\n              <div>\n                <h1>We need your {elec_only ? 'MPAN' : null} {gas_only ? 'MPRN' : null} {dual_active ? same_supplier ? \"MPAN\" : 'MPAN & MPRN' : null}</h1>\n\n                {/* Elec only */}\n                {elec_only ?\n                  (\n                    <>\n                      <p>Meter Point Administration Number (MPAN)</p>\n                      <div className=\"form-mpanmprn-input-container\">\n                        <input type=\"text\" className=\"form-mpanmprn-input\" name=\"mpan\" placeholder={mpan === '' ? 'Introduce MPAN' : ''} value={mpan} onChange={(e) => handleChange(e)} disabled={editMPAN} onPointerDown={() => editMPAN ? setFocusAnimationMpan(!focusAnimationMpan) : null} />\n                        <FaRegEdit className={focusAnimationMpan ? 'edit-search-icon animate__animated animate__headShake': 'edit-search-icon'} onClick={() => updateEditMPAN(!editMPAN)} />\n                        {/* <i className=\"edit-icon far fa-edit\" onClick={() => updateEditMPAN(!editMPAN)}></i> */}\n                      </div>\n\n                      {error_mpan ? (\n                        <Error message={'Please, enter a valid MPAN number.'} />\n                      ) : null}\n                    </>\n                  )\n                  :\n                  null\n                }\n\n                {/* Gas only */}\n                {gas_only ?\n                  (\n                    <>\n                      <p>Meter Point Reference Number (MPRN)</p>\n                      <div className=\"form-mpanmprn-input-container\">\n                        <input type=\"text\" className=\"form-mpanmprn-input\" name=\"mprn\" placeholder={mprn === '' ? 'Introduce MPRN' : ''} value={mprn} onChange={(e) => handleChange(e)} disabled={editMPRN} onPointerDown={() => editMPRN ? setFocusAnimationMprn(!focusAnimationMprn) : null} />\n                        <FaRegEdit className={focusAnimationMprn ? 'edit-search-icon animate__animated animate__headShake': 'edit-search-icon'} onClick={() => updateEditMPRN(!editMPRN)} />\n                        {/* <i className=\"edit-icon far fa-edit\" onClick={() => updateEditMPRN(!editMPRN)}></i> */}\n                      </div>\n\n                      {error_mprn ? (\n                        <Error message={'Please, enter a valid MPRN number.'} />\n                      ) : null}\n                    </>\n                  )\n                  :\n                  null\n                }\n\n                {/* Dual tariff */}\n                {dual_active ?\n                  // Same supplier\n                  same_supplier ?\n                    (\n                      <>\n                        <p>Meter Point Administration Number (MPAN)</p>\n                        <div className=\"form-mpanmprn-input-container\">\n                          <input type=\"text\" className=\"form-mpanmprn-input\" name=\"mpan\" placeholder={mpan === '' ? 'Introduce MPAN' : ''} value={mpan} onChange={(e) => handleChange(e)} disabled={editMPAN} onPointerDown={() => editMPAN ? setFocusAnimationMpan(!focusAnimationMpan) : null} />\n                          <FaRegEdit className={focusAnimationMpan ? 'edit-search-icon animate__animated animate__headShake': 'edit-search-icon'} onClick={() => updateEditMPAN(!editMPAN)} />\n                          {/* <i className=\"edit-icon far fa-edit\" onClick={() => updateEditMPAN(!editMPAN)}></i> */}\n                        </div>\n\n                        {error_mpan ? (\n                          <Error message={'Please, enter a valid MPAN number.'} />\n                        ) : null}\n                      </>\n                    )\n                    :\n                    // Different suppliers\n                    (\n                      <>\n                        <p>Meter Point Administration Number (MPAN)</p>\n                        <div className=\"form-mpanmprn-input-container\">\n                          <input type=\"text\" className=\"form-mpanmprn-input\" name=\"mpan\" placeholder={mpan === '' ? 'Introduce MPAN' : ''} value={mpan} onChange={(e) => handleChange(e)} disabled={editMPAN} onPointerDown={() => editMPAN ? setFocusAnimationMpan(!focusAnimationMpan) : null} />\n                          <FaRegEdit className={focusAnimationMpan ? 'edit-search-icon animate__animated animate__headShake': 'edit-search-icon'} onClick={() => updateEditMPAN(!editMPAN)} />\n                          {/* <i className=\"edit-icon far fa-edit\" onClick={() => updateEditMPAN(!editMPAN)}></i> */}\n                        </div>\n\n                        {error_mpan ? (\n                          <Error message={'Please, enter a valid MPAN number.'} />\n                        ) : null}\n\n                        <p>Meter Point Reference Number (MPRN)</p>\n                        <div className=\"form-mpanmprn-input-container\">\n                          <input type=\"text\" className=\"form-mpanmprn-input\" name=\"mprn\" placeholder={mprn === '' ? 'Introduce MPRN' : ''} value={mprn} onChange={(e) => handleChange(e)} disabled={editMPRN} onPointerDown={() => editMPRN ? setFocusAnimationMprn(!focusAnimationMprn) : null} />\n                          <FaRegEdit className={focusAnimationMprn ? 'edit-search-icon animate__animated animate__headShake': 'edit-search-icon'} onClick={() => updateEditMPRN(!editMPRN)} />\n                          {/* <i className=\"edit-icon far fa-edit\" onClick={() => updateEditMPRN(!editMPRN)}></i> */}\n                        </div>\n\n                        {error_mprn ? (\n                          <Error message={'Please, enter a valid MPRN number.'} />\n                        ) : null}\n                      </>\n                    )\n                  :\n                  null\n                }\n\n              </div>\n              {/* Image */}\n              <div className=\"form-mpanmprn-img\">\n                <img src={Search} alt=\"\" width=\"80\" />\n              </div>\n            </div>\n\n            {/* Buttons */}\n            <div className=\"form-mpanmprn-btn-container\">\n              <button className=\"form-mpanmprn-btn btn-back\" onClick={(e) => goBack(e)}>\n                <IconContext.Provider value={{ color: '#D338AE', size: '35px' }}>\n                  <IoMdArrowDropleft className=\"icon-back\" />\n                </IconContext.Provider>\n                Go back\n              </button>\n\n              <button data-cy=\"mpanmprn-continue\" className=\"form-mpanmprn-btn btn-next\" onClick={(e) => goToSupplyInformation(e)}>\n                Continue\n                <IconContext.Provider value={{ color: '#FFF', size: '35px' }}>\n                  <IoMdArrowDropright className=\"icon-next\" />\n                </IconContext.Provider>\n              </button>\n            </div>\n          </div>\n\n          {showScript ?\n            (\n              <div className=\"helper-mpanmprn\">\n                <div className=\"script-mpanmprn\">\n                  <FormScript step={4} />\n                </div>\n\n                <div className=\"assistant-mpanmprn-custom\">\n                  <FormAssistant tips={3} />\n                </div>\n              </div>\n            )\n            :\n            <div style={{ width: '100%' }}>\n              <div className=\"assistant-mpanmprn\">\n                <FormAssistant tips={3} />\n              </div>\n            </div>\n          }\n\n        </div>\n      </section>\n    </>\n  );\n}\n\nexport default FormMpanMprn;\n"]},"metadata":{},"sourceType":"module"}