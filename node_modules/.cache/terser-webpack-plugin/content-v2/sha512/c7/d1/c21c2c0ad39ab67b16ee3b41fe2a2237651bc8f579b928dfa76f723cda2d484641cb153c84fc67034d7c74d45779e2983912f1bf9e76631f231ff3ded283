{"code":"(this[\"webpackJsonpinbound-sales-portal\"]=this[\"webpackJsonpinbound-sales-portal\"]||[]).push([[21],{109:function(e,a,t){},153:function(e,a,t){\"use strict\";t.r(a);var s=t(18),n=t.n(s),c=t(23),r=t(38),i=t(37),o=t(27),l=t(2),d=t(84),u=(t(109),t(19)),m=t(20),j=t.p+\"static/media/moneyMan.33c20cf2.png\",b=t(6);a.default=function(){var e,a,t=Object(l.useState)({email:\"\",password:\"\"}),s=Object(o.a)(t,2),g=s[0],O=s[1],h=Object(l.useState)(!1),p=Object(o.a)(h,2),f=p[0],x=p[1],v=Object(l.useState)({message:\"\"}),w=Object(o.a)(v,2),N=w[0],y=w[1],k=g.email,I=g.password,S=function(e){O(Object(i.a)(Object(i.a)({},g),{},Object(r.a)({},e.target.name,e.target.value.replace(/ /g,\"\"))))},E=function(e){return u.a.fetchSignInMethodsForEmail(e).then((function(e){return e[0]}))},P=function(){var e=Object(c.a)(n.a.mark((function e(a){var t,s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),t=g.email,s=g.password,\"\"!==t){e.next=7;break}return y(Object(i.a)(Object(i.a)({},N),{},{message:\"Email is required\"})),x(!0),e.abrupt(\"return\");case 7:if(\"\"!==s){e.next=11;break}return y(Object(i.a)(Object(i.a)({},N),{},{message:\"Password is required\"})),x(!0),e.abrupt(\"return\");case 11:return e.next=13,E(t);case 13:if(c=e.sent,y(Object(i.a)(Object(i.a)({},N),{},{message:\"Email address already in use.\"})),\"google.com\"!==c){e.next=19;break}return y(Object(i.a)(Object(i.a)({},N),{},{message:\"Please, sign in with your Google account\"})),x(!0),e.abrupt(\"return\");case 19:return e.next=21,u.a.signInWithEmailAndPassword(t,s).then((function(e){console.log(\"Success\"),u.c.collection(\"signInLogs\").add({email:t,signInTime:m.a.firestore.FieldValue.serverTimestamp()})})).catch((function(e){switch(console.error(e),e.code){case\"auth/email-already-in-use\":y(Object(i.a)(Object(i.a)({},N),{},{message:\"Email address already in use.\"}));break;case\"auth/invalid-email\":y(Object(i.a)(Object(i.a)({},N),{},{message:\"Email address is invalid.\"}));break;case\"auth/operation-not-allowed\":y(Object(i.a)(Object(i.a)({},N),{},{message:\"Error during sign up.\"}));break;case\"auth/weak-password\":y(Object(i.a)(Object(i.a)({},N),{},{message:\"Password is not strong enough. Add additional characters including special characters and numbers.\"}));break;case\"auth/wrong-password\":y(Object(i.a)(Object(i.a)({},N),{},{message:\"Password is wrong\"}));break;case\"auth/user-not-found\":y(Object(i.a)(Object(i.a)({},N),{},{message:\"User not found, try with your google account instead\"}));break;default:y(Object(i.a)(Object(i.a)({},N),{},{message:e.message}))}x(!0)}));case 21:case\"end\":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),_=function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,u.a.signInWithPopup(u.d).then((function(e){var a=e.user.email;u.c.collection(\"signInLogs\").add({email:a,signInTime:m.a.firestore.FieldValue.serverTimestamp()})})).catch((function(e){var a=e.code,t=e.message,s=e.email,n=e.credential;a&&console.error(a),t&&console.error(t),s&&console.error(s),n&&console.error(n)}));case 3:case\"end\":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(\"div\",{className:\"some-page-wrapper\",children:Object(b.jsxs)(\"div\",{className:\"row\",children:[Object(b.jsx)(\"div\",{className:\"column\",children:Object(b.jsxs)(\"div\",{className:\"title-column\",children:[Object(b.jsxs)(\"div\",{className:\"login-title\",children:[Object(b.jsx)(\"h1\",{children:\"Utility Switchboard\"}),Object(b.jsxs)(\"h1\",{children:[Object(b.jsx)(\"span\",{children:\"Savings Portal\"}),\".\"]})]}),Object(b.jsx)(\"div\",{className:\"login-btn-container\",children:Object(b.jsx)(\"button\",{className:\"btn-login\",onClick:function(e){return function(e){e.preventDefault(),document.getElementById(\"modal\").style.display=\"flex\"}(e)},children:\"Sign In\"})}),Object(b.jsx)(\"div\",{className:\"modal animate__animated animate__pulse\",id:\"modal\",children:Object(b.jsxs)(\"form\",{onSubmit:function(e){return P(e)},className:\"modal-content\",children:[Object(b.jsx)(\"div\",{className:\"modal-logo\",children:Object(b.jsx)(\"img\",{src:\"https://utilityswitchboard.com/wp-content/uploads/2021/07/usb-favicon.png\",alt:\"\"})}),Object(b.jsx)(\"div\",{className:\"form-field\",children:Object(b.jsx)(\"input\",(e={type:\"email\",id:\"email\",name:\"email\",placeholder:\"Introduce email\",value:k||\"\",onChange:S},Object(r.a)(e,\"placeholder\",\"Email\"),Object(r.a)(e,\"required\",!0),e))}),Object(b.jsx)(\"div\",{className:\"form-field\",children:Object(b.jsx)(\"input\",(a={type:\"password\",id:\"password\",name:\"password\",placeholder:\"Introduce password\",value:I||\"\",onChange:S},Object(r.a)(a,\"placeholder\",\"Password\"),Object(r.a)(a,\"autoComplete\",\"on\"),Object(r.a)(a,\"required\",!0),a))}),f?Object(b.jsx)(\"div\",{className:\"error-modal\",children:Object(b.jsx)(d.a,{message:N.message})}):null,Object(b.jsx)(\"div\",{className:\"login-btn-container\",children:Object(b.jsx)(\"button\",{className:\"btn-login\",children:\"Sign In\"})}),Object(b.jsx)(\"p\",{children:\"Or sign in using\"}),Object(b.jsx)(\"button\",{className:\"google-btn\",onClick:function(e){return _(e)},children:Object(b.jsx)(\"div\",{children:Object(b.jsx)(\"img\",{className:\"google-icon\",src:\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\",loading:\"lazy\"})})})]})})]})}),Object(b.jsx)(\"div\",{className:\"column\",children:Object(b.jsx)(\"div\",{className:\"image-column\",children:Object(b.jsx)(\"div\",{className:\"image-container\",children:Object(b.jsx)(\"img\",{src:j,alt:\"Saving Money\"})})})})]})})})}},84:function(e,a,t){\"use strict\";t(85);var s=t(6);a.a=function(e){var a=e.message;return Object(s.jsx)(\"div\",{\"data-cy\":\"error\",className:\"error-container\",id:\"error\",children:Object(s.jsx)(\"div\",{className:\"error-message\",children:Object(s.jsx)(\"p\",{className:\"error-text\",children:a})})})}},85:function(e,a,t){}}]);","name":"static/js/21.5440cae9.chunk.js","map":{"version":3,"sources":["static/js/21.5440cae9.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","regenerator","regenerator_default","n","asyncToGenerator","defineProperty","objectSpread2","slicedToArray","react","Error","firebase","index_esm","moneyMan","p","jsx_runtime","_jsx2","_jsx3","_useState","Object","email","password","_useState2","user","setUser","_useState3","_useState4","error","updateError","_useState5","message","_useState6","errorMessage","updateErrorMessage","onChange","e","target","name","value","replace","checkSessionMethod","fetchSignInMethodsForEmail","then","res","_onSubmit","_ref","a","mark","_callee","methodType","wrap","_context","prev","next","preventDefault","abrupt","sent","signInWithEmailAndPassword","userCredential","console","log","collection","add","signInTime","firestore","FieldValue","serverTimestamp","catch","code","stop","_x","apply","arguments","signInWithGoogle","_ref2","_callee2","_context2","signInWithPopup","result","errorCode","credential","_x2","children","className","onClick","document","getElementById","style","display","dispatchModal","id","onSubmit","src","alt","type","placeholder","loading","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__"],"mappings":"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"},"input":"(this[\"webpackJsonpinbound-sales-portal\"] = this[\"webpackJsonpinbound-sales-portal\"] || []).push([[21],{\n\n/***/ 109:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 153:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(18);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(38);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(37);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(27);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./src/components/Error/Error.jsx\nvar Error = __webpack_require__(84);\n\n// EXTERNAL MODULE: ./src/pages/LoginPage/Login.css\nvar Login = __webpack_require__(109);\n\n// EXTERNAL MODULE: ./src/firebase/firebase.js\nvar firebase = __webpack_require__(19);\n\n// EXTERNAL MODULE: ./node_modules/firebase/app/dist/index.esm.js\nvar index_esm = __webpack_require__(20);\n\n// CONCATENATED MODULE: ./src/assets/img/moneyMan.png\n/* harmony default export */ var moneyMan = (__webpack_require__.p + \"static/media/moneyMan.33c20cf2.png\");\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(6);\n\n// CONCATENATED MODULE: ./src/pages/LoginPage/Login.jsx\n// Components\n// CSS\n// Firebase\n// Images\nfunction Login_Login(){var _jsx2,_jsx3;/**-- STATES --*/ // User state\nvar _useState=Object(react[\"useState\"])({email:\"\",password:\"\"}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),user=_useState2[0],setUser=_useState2[1];// Error state\nvar _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),error=_useState4[0],updateError=_useState4[1];var _useState5=Object(react[\"useState\"])({message:''}),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),errorMessage=_useState6[0],updateErrorMessage=_useState6[1];// Taking user values\nvar email=user.email,password=user.password;var onChange=function onChange(e){setUser(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},user),{},Object(defineProperty[\"a\" /* default */])({},e.target.name,e.target.value.replace(/ /g,\"\"))));};// Check session method\nvar checkSessionMethod=function checkSessionMethod(email){var signInMethodsForEmail=firebase[\"a\" /* auth */].fetchSignInMethodsForEmail(email).then(function(res){return res[0];});return signInMethodsForEmail;};var dispatchModal=function dispatchModal(e){e.preventDefault();document.getElementById(\"modal\").style.display='flex';};// Submit form\nvar _onSubmit=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(e){var email,password,methodType;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();email=user.email;password=user.password;// Email field validation\nif(!(email===\"\")){_context.next=7;break;}updateErrorMessage(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},errorMessage),{},{message:'Email is required'}));// Show error\nupdateError(true);return _context.abrupt(\"return\");case 7:if(!(password===\"\")){_context.next=11;break;}updateErrorMessage(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},errorMessage),{},{message:'Password is required'}));// Show error\nupdateError(true);return _context.abrupt(\"return\");case 11:_context.next=13;return checkSessionMethod(email);case 13:methodType=_context.sent;updateErrorMessage(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},errorMessage),{},{message:'Email address already in use.'}));// Checking method type\nif(!(methodType==='google.com')){_context.next=19;break;}// Error message\nupdateErrorMessage(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},errorMessage),{},{message:'Please, sign in with your Google account'}));// Show error\nupdateError(true);return _context.abrupt(\"return\");case 19:_context.next=21;return firebase[\"a\" /* auth */].signInWithEmailAndPassword(email,password).then(function(userCredential){console.log('Success');// console.log(userCredential.user.uid);\n// Firebase\n// console.log(userCredential.user.uid);\n// Firebase\nfirebase[\"c\" /* db */].collection('signInLogs').add({email:email,signInTime:index_esm[\"a\" /* default */].firestore.FieldValue.serverTimestamp()});}).catch(function(error){console.error(error);switch(error.code){case'auth/email-already-in-use':updateErrorMessage(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},errorMessage),{},{message:'Email address already in use.'}));break;case'auth/invalid-email':updateErrorMessage(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},errorMessage),{},{message:'Email address is invalid.'}));break;case'auth/operation-not-allowed':updateErrorMessage(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},errorMessage),{},{message:'Error during sign up.'}));break;case'auth/weak-password':updateErrorMessage(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},errorMessage),{},{message:'Password is not strong enough. Add additional characters including special characters and numbers.'}));break;case'auth/wrong-password':updateErrorMessage(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},errorMessage),{},{message:'Password is wrong'}));break;case'auth/user-not-found':updateErrorMessage(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},errorMessage),{},{message:'User not found, try with your google account instead'}));break;default:updateErrorMessage(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},errorMessage),{},{message:error.message}));break;}updateError(true);});case 21:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var signInWithGoogle=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(e){return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();// auth.signInWithRedirect(googleProvider);\n_context2.next=3;return firebase[\"a\" /* auth */].signInWithPopup(firebase[\"d\" /* googleProvider */]).then(function(result){// Email\nvar email=result.user.email;// Firebase\n// Firebase\nfirebase[\"c\" /* db */].collection('signInLogs').add({email:email,signInTime:index_esm[\"a\" /* default */].firestore.FieldValue.serverTimestamp()});}).catch(function(error){// Handle Errors here.\nvar errorCode=error.code;var errorMessage=error.message;// The email of the user's account used.\n// The email of the user's account used.\nvar email=error.email;// The firebase.auth.AuthCredential type that was used.\n// The firebase.auth.AuthCredential type that was used.\nvar credential=error.credential;if(errorCode){console.error(errorCode);}if(errorMessage){console.error(errorMessage);}if(email){console.error(email);}if(credential){console.error(credential);}return;});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function signInWithGoogle(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"some-page-wrapper\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"row\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"column\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"title-column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"login-title\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"Utility Switchboard\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h1\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:\"Savings Portal\"}),\".\"]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"login-btn-container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn-login\",onClick:function onClick(e){return dispatchModal(e);},children:\"Sign In\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"modal animate__animated animate__pulse\",id:\"modal\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{onSubmit:function onSubmit(e){return _onSubmit(e);},className:\"modal-content\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"modal-logo\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:\"https://utilityswitchboard.com/wp-content/uploads/2021/07/usb-favicon.png\",alt:\"\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"form-field\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",(_jsx2={type:\"email\",id:\"email\",name:\"email\",placeholder:\"Introduce email\",value:email||'',onChange:onChange},Object(defineProperty[\"a\" /* default */])(_jsx2,\"placeholder\",\"Email\"),Object(defineProperty[\"a\" /* default */])(_jsx2,\"required\",true),_jsx2))}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"form-field\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",(_jsx3={type:\"password\",id:\"password\",name:\"password\",placeholder:\"Introduce password\",value:password||'',onChange:onChange},Object(defineProperty[\"a\" /* default */])(_jsx3,\"placeholder\",\"Password\"),Object(defineProperty[\"a\" /* default */])(_jsx3,\"autoComplete\",\"on\"),Object(defineProperty[\"a\" /* default */])(_jsx3,\"required\",true),_jsx3))}),error?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"error-modal\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Error[\"a\" /* default */],{message:errorMessage.message})}):null,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"login-btn-container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn-login\",children:\"Sign In\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Or sign in using\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"google-btn\",onClick:function onClick(e){return signInWithGoogle(e);},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"google-icon\",src:\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\",loading:\"lazy\"})})})]})})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"column\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"image-column\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"image-container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:moneyMan,alt:\"Saving Money\"})})})})]})})});}/* harmony default export */ var LoginPage_Login = __webpack_exports__[\"default\"] = (Login_Login);\n\n/***/ }),\n\n/***/ 84:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _Error_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85);\n/* harmony import */ var _Error_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Error_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);\nvar Error=function Error(_ref){var message=_ref.message;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsx\"])(\"div\",{\"data-cy\":\"error\",className:\"error-container\",id:\"error\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsx\"])(\"div\",{className:\"error-message\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__[\"jsx\"])(\"p\",{className:\"error-text\",children:message})})});};/* harmony default export */ __webpack_exports__[\"a\"] = (Error);\n\n/***/ }),\n\n/***/ 85:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/juanlugo/Desktop/sp-firebase/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/juanlugo/Desktop/sp-firebase/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/juanlugo/Desktop/sp-firebase/node_modules/postcss-loader/src/index.js??postcss!/Users/juanlugo/Desktop/sp-firebase/src/pages/LoginPage/Login.css","/Users/juanlugo/Desktop/sp-firebase/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/Users/juanlugo/Desktop/sp-firebase/src/assets/img/moneyMan.png","/Users/juanlugo/Desktop/sp-firebase/src/pages/LoginPage/Login.jsx","/Users/juanlugo/Desktop/sp-firebase/src/components/Error/Error.jsx","/Users/juanlugo/Desktop/sp-firebase/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/juanlugo/Desktop/sp-firebase/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/juanlugo/Desktop/sp-firebase/node_modules/postcss-loader/src/index.js??postcss!/Users/juanlugo/Desktop/sp-firebase/src/components/Error/Error.css"],"names":["Login","useState","email","password","user","setUser","error","updateError","message","errorMessage","updateErrorMessage","onChange","e","target","name","value","replace","checkSessionMethod","signInMethodsForEmail","auth","fetchSignInMethodsForEmail","then","res","dispatchModal","preventDefault","document","getElementById","style","display","onSubmit","methodType","signInWithEmailAndPassword","userCredential","console","log","db","collection","add","signInTime","firebase","firestore","FieldValue","serverTimestamp","catch","code","signInWithGoogle","signInWithPopup","googleProvider","result","errorCode","credential","MoneyMan","Error"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","export default __webpack_public_path__ + \"static/media/moneyMan.33c20cf2.png\";","import React, { useState } from \"react\";\n// Components\nimport Error from \"../../components/Error/Error\";\n// CSS\nimport \"./Login.css\";\n// Firebase\nimport { db, auth, googleProvider } from \"../../firebase/firebase\";\nimport firebase from \"firebase/app\";\n// Images\nimport MoneyMan from \"../../assets/img/moneyMan.png\";\n\nfunction Login() {\n\n    /**-- STATES --*/\n\n    // User state\n    const [user, setUser] = useState({\n        email: \"\",\n        password: \"\",\n    });\n\n    // Error state\n    const [error, updateError] = useState(false);\n    const [errorMessage, updateErrorMessage] = useState({ message: '' })\n\n    // Taking user values\n    const { email, password } = user;\n    const onChange = (e) => {\n        setUser({\n            ...user,\n            [e.target.name]: e.target.value.replace(/ /g, \"\"),\n        });\n    };\n\n    // Check session method\n    const checkSessionMethod = (email) => {\n\n        let signInMethodsForEmail = auth.fetchSignInMethodsForEmail(email).then((res) => {\n            return res[0];\n        });\n\n        return signInMethodsForEmail;\n\n    };\n\n    const dispatchModal = (e) => {\n        e.preventDefault();\n\n        document.getElementById(\"modal\").style.display = 'flex';\n    }\n\n    // Submit form\n    const onSubmit = async (e) => {\n        e.preventDefault();\n\n        const email = user.email;\n        const password = user.password;\n\n        // Email field validation\n        if (email === \"\") {\n            updateErrorMessage({ ...errorMessage, message: 'Email is required' })\n            // Show error\n            updateError(true);\n            return;\n        }\n\n        // Password field validation\n        if (password === \"\") {\n            updateErrorMessage({ ...errorMessage, message: 'Password is required' })\n            // Show error\n            updateError(true);\n            return;\n        }\n\n        // Method type\n        const methodType = await checkSessionMethod(email);\n\n        updateErrorMessage({ ...errorMessage, message: 'Email address already in use.' });\n\n        // Checking method type\n        if (methodType === 'google.com') {\n            // Error message\n            updateErrorMessage({ ...errorMessage, message: 'Please, sign in with your Google account' });\n            // Show error\n            updateError(true);\n            return;\n        }\n\n        // Dispatch Sign in function\n        await auth.signInWithEmailAndPassword(email, password).then((userCredential) => {\n            console.log('Success')\n            // console.log(userCredential.user.uid);\n            // Firebase\n            db.collection('signInLogs').add({\n                email,\n                signInTime: firebase.firestore.FieldValue.serverTimestamp(),\n            });\n        }).catch(error => {\n            console.error(error);\n            switch (error.code) {\n                case 'auth/email-already-in-use':\n                    updateErrorMessage({ ...errorMessage, message: 'Email address already in use.' });\n                    break;\n                case 'auth/invalid-email':\n                    updateErrorMessage({ ...errorMessage, message: 'Email address is invalid.' });\n                    break;\n                case 'auth/operation-not-allowed':\n                    updateErrorMessage({ ...errorMessage, message: 'Error during sign up.' });\n                    break;\n                case 'auth/weak-password':\n                    updateErrorMessage({ ...errorMessage, message: 'Password is not strong enough. Add additional characters including special characters and numbers.' });\n                    break;\n                case 'auth/wrong-password':\n                    updateErrorMessage({ ...errorMessage, message: 'Password is wrong' });\n                    break;\n                case 'auth/user-not-found':\n                    updateErrorMessage({ ...errorMessage, message: 'User not found, try with your google account instead' });\n                    break;\n                default:\n                    updateErrorMessage({ ...errorMessage, message: error.message });\n                    break;\n            }\n            updateError(true);\n        });\n    };\n\n    const signInWithGoogle = async (e) => {\n        e.preventDefault();\n\n        // auth.signInWithRedirect(googleProvider);\n        await auth.signInWithPopup(googleProvider)\n            .then((result) => {\n                // Email\n                const email = result.user.email;\n\n                // Firebase\n                db.collection('signInLogs').add({\n                    email,\n                    signInTime: firebase.firestore.FieldValue.serverTimestamp(),\n                });\n            })\n            .catch((error) => {\n                // Handle Errors here.\n                var errorCode = error.code;\n                var errorMessage = error.message;\n                // The email of the user's account used.\n                var email = error.email;\n                // The firebase.auth.AuthCredential type that was used.\n                var credential = error.credential;\n\n                if (errorCode) { console.error(errorCode); }\n\n                if (errorMessage) { console.error(errorMessage); }\n\n                if (email) { console.error(email); }\n\n                if (credential) { console.error(credential); }\n\n                return;\n            });\n    };\n\n    return (\n        <>\n            <div className=\"some-page-wrapper\">\n                <div className=\"row\">\n                    <div className=\"column\">\n                        <div className=\"title-column\">\n                            <div className=\"login-title\">\n                                <h1>Utility Switchboard</h1>\n                                <h1>\n                                    <span>Savings Portal</span>.\n                                </h1>\n                            </div>\n\n                            <div className=\"login-btn-container\">\n                                <button className=\"btn-login\" onClick={(e) => dispatchModal(e)}>Sign In</button>\n                            </div>\n\n                            <div className=\"modal animate__animated animate__pulse\" id=\"modal\">\n                                <form onSubmit={(e) => onSubmit(e)} className=\"modal-content\">\n\n                                    <div className=\"modal-logo\">\n                                        <img src={\"https://utilityswitchboard.com/wp-content/uploads/2021/07/usb-favicon.png\"} alt=\"\" />\n                                    </div>\n\n                                    <div className=\"form-field\">\n                                        <input\n                                            type=\"email\"\n                                            id=\"email\"\n                                            name=\"email\"\n                                            placeholder=\"Introduce email\"\n                                            value={email || ''}\n                                            onChange={onChange}\n                                            placeholder=\"Email\"\n                                            required\n                                        />\n                                    </div>\n\n                                    <div className=\"form-field\">\n                                        <input\n                                            type=\"password\"\n                                            id=\"password\"\n                                            name=\"password\"\n                                            placeholder=\"Introduce password\"\n                                            value={password || ''}\n                                            onChange={onChange}\n                                            placeholder=\"Password\"\n                                            autoComplete=\"on\"\n                                            required\n                                        />\n                                    </div>\n\n                                    {error ? (\n                                        <div className=\"error-modal\"><Error message={errorMessage.message} /></div>\n                                    ) : null}\n\n                                    <div className=\"login-btn-container\">\n                                        <button className=\"btn-login\">Sign In</button>\n                                    </div>\n\n                                    <p>Or sign in using</p>\n\n                                    <button className=\"google-btn\" onClick={(e) => signInWithGoogle(e)}>\n                                        <div>\n                                            <img className=\"google-icon\" src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" loading=\"lazy\" />\n                                        </div>\n                                    </button>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"column\">\n                        <div className=\"image-column\">\n                            <div className=\"image-container\">\n                                <img src={MoneyMan} alt=\"Saving Money\" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default Login;\n","import \"./Error.css\";\n\nconst Error = ({ message }) => {\n\n  return (\n    <div data-cy=\"error\" className=\"error-container\" id=\"error\">\n      <div className=\"error-message\">\n        <p className=\"error-text\">{message}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default Error;\n","// extracted by mini-css-extract-plugin"]}}