(this["webpackJsonpinbound-sales-portal"]=this["webpackJsonpinbound-sales-portal"]||[]).push([[20],{128:function(e,t,s){},149:function(e,t,s){"use strict";s.r(t);var n=s(18),a=s.n(n),c=s(23),r=s(38),i=s(37),l=s(27),o=s(2),m=(s(128),s(0)),d=s(86),j=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},u=s(145),b=s(103),h=s(127),O=s(102),p=s(101),f=s(91);function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function v(e,t,s){t&&t.defaultCountry&&!Object(f.c)(t.defaultCountry,s)&&(t=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),n.forEach((function(t){x(e,t,s[t])}))}return e}({},t,{defaultCountry:void 0}));try{return Object(O.a)(e,t,s)}catch(n){if(!(n instanceof p.a))throw n}}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),n.forEach((function(t){g(e,t,s[t])}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function N(){var e=Object(h.b)(arguments),t=e.text,s=e.options,n=e.metadata,a=v(t,s=y({},s,{extract:!1}),n);return a&&a.isValid()||!1}function _(){return Object(b.a)(N,arguments)}var D=s(84),w=s(6);t.default=function(e){var t=e.customerInformation,s=e.progressBar,n=e.updateCustomerInformation,b=e.updateShowFormCompare,h=e.updateShowFormDetails,O=e.updateShowFormBankDetails,p=e.updateProgressBar,f=e.updateShowOverlay,x=Object(o.useState)(!0),v=Object(l.a)(x,2),y=v[0],g=v[1];Object(o.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[]);var N=Object(o.useState)(!1),k=Object(l.a)(N,2),C=k[0],P=k[1],S=Object(o.useState)({message:""}),A=Object(l.a)(S,2),z=A[0],F=A[1],E=t.customerAddres,Z=E.doornumber,T=E.addressline1,q=E.addressline2,B=E.city,I=E.postcode,J=t.switching_details.supplier_selected,G=J.tariff_name,L=J.exit_fees,V=J.monthly_cost,H=t.debt,M=H.debt_apply,R=H.debt_amount;Object(o.useEffect)((function(){if(C){document.querySelector("#error").scrollIntoView({behavior:"smooth",block:"end",inline:"end"})}}),[C]);var $=function(e){P(!1),n(Object(i.a)(Object(i.a)({},t),{},{customerDetails:Object(i.a)(Object(i.a)({},t.customerDetails),{},Object(r.a)({},e.target.name,e.target.value))}))},K=function(){var e=Object(c.a)(a.a.mark((function e(s){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),f(!0),c={phone:t.customerDetails.phone.replace(/[^0-9\.]+/g,"").trim().toString()},e.next=5,fetch("https://zohosdkfunction.azurewebsites.net/api/httptrigger1?method=verify",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(e){return 200!==e.status?Promise.reject(e.json()):e.json()})).then((function(e){if(200!==e.status)return g(!1),Promise.reject(e);n(Object(i.a)(Object(i.a)({},t),{},{customerDetails:Object(i.a)(Object(i.a)({},t.customerDetails),{},{first_name:e.first_name?e.first_name:"",last_name:e.last_name?e.last_name:"",email:e.email?e.email:"",phone:e.phone?e.phone:""}),bankDetails:{account_holder:"",account_number:"",sort_code:""}})),g(!0)})).catch((function(e){console.error("Error: ",e),n(Object(i.a)(Object(i.a)({},t),{},{customerDetails:Object(i.a)(Object(i.a)({},t.customerDetails),{},{first_name:"",last_name:"",email:"",phone:c.phone}),bankDetails:{account_holder:"",account_number:"",sort_code:""}}))}));case 5:f(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(c.a)(a.a.mark((function e(c){var r,l,o,m,d,b,x,v,g,N,D,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),r=t.customerDetails,l=r.first_name,o=r.last_name,m=r.email,d=r.phone,b=l.replace(/[^a-zA-Z ]/g,"").trim(),x=o.replace(/[^a-zA-Z ]/g,"").trim(),v=m.replace(/[^A-Za-z0-9|@.-]/g,"").trim(),g=d.replace(/[^0-9\.]+/g,"").trim().toString(),j(v)){e.next=10;break}return F(Object(i.a)(Object(i.a)({},z),{},{message:"Please introduce a valid email address"})),P(!0),e.abrupt("return");case 10:if(console.log(g),!(g.length<=10||g.length>12)){e.next=16;break}return F(Object(i.a)(Object(i.a)({},z),{},{message:"Please introduce a valid phone number"})),P(!0),e.abrupt("return");case 16:if(N=Object(u.a)(g,"GB"),_(D=N.number,"GB")){e.next=23;break}return F(Object(i.a)(Object(i.a)({},z),{},{message:"Please introduce a valid phone number"})),P(!0),e.abrupt("return");case 23:if(b&&x&&v&&g){e.next=28;break}return F(Object(i.a)(Object(i.a)({},z),{},{message:"All fields are required"})),P(!0),e.abrupt("return");case 28:if(y){e.next=37;break}return f(!0),w={fullname:"".concat(b," ").concat(x),email:v,phone:D,authorised_by:t.agent.email},console.log(w),"https://zohocontactcreatefunction.azurewebsites.net/api/HttpTrigger1?method=createContact",e.next=36,fetch("https://zohocontactcreatefunction.azurewebsites.net/api/HttpTrigger1?method=createContact",{method:"POST",body:JSON.stringify(w),headers:{"Content-Type":"application/json"}}).then((function(e){return console.log(e),e.json()})).then((function(e){return console.log(e),e})).catch((function(e){console.error("Catch an error fetching to postcoder ".concat(e))}));case 36:f(!1);case 37:n(Object(i.a)(Object(i.a)({},t),{},{customerDetails:Object(i.a)(Object(i.a)({},t.customerDetails),{},{first_name:b,last_name:x,email:v,phone:D.replace(/[^0-9\.]+/g,"")}),bankDetails:{account_holder:"",account_number:"",sort_code:""}})),P(!1),h(!1),p(Object(i.a)(Object(i.a)({},s),{},{step:10})),O(!0);case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){t.customerDetails.first_name&&t.customerDetails.last_name&&t.customerDetails.email&&t.customerDetails.phone||g(!1)}),[]),Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("section",{className:"form-details-section",children:Object(w.jsxs)("div",{className:"form-details-container",children:[Object(w.jsxs)("div",{className:"form-details-content",children:[Object(w.jsxs)("div",{className:"form-details",children:[Object(w.jsx)("h1",{children:"Customer Details"}),Object(w.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Nostrum dicta libero tenetur commodi id? Eius aperiam illo voluptatem fuga nobis nulla vitae obcaecati. Rerum doloribus veniam accusamus ad quibusdam sequi!"})]}),Object(w.jsxs)("form",{className:"form-details-input-container",onSubmit:function(e){return Q(e)},children:[Object(w.jsxs)("div",{className:"form-details-input-content-custom",children:[Object(w.jsxs)("div",{className:"form-details-input-element-custom",children:[Object(w.jsxs)("label",{htmlFor:"firstName",children:["First Name",Object(w.jsx)("span",{children:"*"})]}),Object(w.jsx)("input",{type:"text",id:"firstName",name:"first_name",onChange:$,value:t.customerDetails.first_name.replace(/[^a-zA-Z ]/g,"")||"",disabled:y})]}),Object(w.jsxs)("div",{className:"form-details-input-element-custom",children:[Object(w.jsxs)("label",{htmlFor:"lastName",children:["Last Name",Object(w.jsx)("span",{children:"*"})]}),Object(w.jsx)("input",{type:"text",id:"lastName",name:"last_name",onChange:$,value:t.customerDetails.last_name.replace(/[^a-zA-Z ]/g,"")||"",disabled:y})]})]}),Object(w.jsxs)("div",{className:"form-details-input-element",children:[Object(w.jsxs)("label",{htmlFor:"emailAddress",children:["Email address",Object(w.jsx)("span",{children:"*"})]}),Object(w.jsx)("input",{type:"text",id:"emailAddress",name:"email",onChange:$,value:t.customerDetails.email.replace(/[^A-Za-z0-9|@.-]/g,"")||"",disabled:y,required:!0})]}),Object(w.jsxs)("div",{className:"form-details-input-content-custom",style:C?{marginBottom:"1.9rem"}:null,children:[Object(w.jsxs)("div",{className:"form-details-input-element-custom",children:[Object(w.jsxs)("label",{htmlFor:"phoneNumber",children:["Phone Number",Object(w.jsx)("span",{children:"*"})]}),Object(w.jsx)("input",{type:"text",id:"phoneNumber",name:"phone",onChange:$,value:t.customerDetails.phone.replace(/[^0-9\.]+/g,"")||"",disabled:y,required:!0})]}),Object(w.jsx)("div",{className:"form-details-btn-container-custom",children:Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{className:"form-details-btn-custom",type:"button",disabled:y,onClick:function(e){return K(e)},children:"Verify"}),Object(w.jsx)("button",{className:"form-details-btn-custom",type:"button",onClick:function(e){return function(e){e.preventDefault(),g(!1)}(e)},children:"Edit"})]})})]}),C?Object(w.jsx)(D.a,{message:z.message}):null,Object(w.jsxs)("div",{className:"form-details-btn-container",children:[Object(w.jsxs)("button",{className:"form-details-btn btn-back",onClick:function(e){return function(e){e.preventDefault();var a=Object(i.a)({},t);delete a.switching_details,delete a.customerDetails,n(Object(i.a)({},a)),P(!1),h(!1),p(Object(i.a)(Object(i.a)({},s),{},{step:8})),b(!0)}(e)},children:[Object(w.jsx)(m.b.Provider,{value:{color:"#D338AE",size:"35px"},children:Object(w.jsx)(d.b,{className:"icon-back"})}),"Go back"]}),Object(w.jsxs)("button",{"data-cy":"addrtyped-continue",className:"form-details-btn btn-next",children:["Continue",Object(w.jsx)(m.b.Provider,{value:{color:"#FFF",size:"35px"},children:Object(w.jsx)(d.c,{className:"icon-next"})})]})]})]})]}),Object(w.jsxs)("div",{className:"form-summary-container",children:[Object(w.jsx)("h1",{children:"Summary"}),Object(w.jsxs)("div",{className:"form-summary-section",children:[Object(w.jsx)("h2",{children:"Customer Information"}),Object(w.jsxs)("div",{className:"form-summary-content",children:[Object(w.jsxs)("div",{className:"form-summary-element",children:[Object(w.jsx)("p",{children:Object(w.jsx)("span",{children:"Door number:"})}),Object(w.jsx)("p",{className:"text-end",children:Z})]}),Object(w.jsxs)("div",{className:"form-summary-element",children:[Object(w.jsx)("p",{children:Object(w.jsx)("span",{children:"Address line 1:"})}),Object(w.jsx)("p",{className:"text-end",children:T})]}),Object(w.jsxs)("div",{className:"form-summary-element",children:[Object(w.jsx)("p",{children:Object(w.jsx)("span",{children:"Address line 2:"})}),Object(w.jsx)("p",{className:"text-end",children:q})]}),Object(w.jsxs)("div",{className:"form-summary-element",children:[Object(w.jsx)("p",{children:Object(w.jsx)("span",{children:"City:"})}),Object(w.jsx)("p",{className:"text-end",children:B})]}),Object(w.jsxs)("div",{className:"form-summary-element",children:[Object(w.jsx)("p",{children:Object(w.jsx)("span",{children:"Postcode:"})}),Object(w.jsx)("p",{className:"text-end",children:I})]})]})]}),Object(w.jsx)("hr",{}),Object(w.jsxs)("div",{className:"form-summary-section",children:[Object(w.jsx)("h2",{children:"About your chosen plan"}),Object(w.jsxs)("div",{className:"form-summary-content",children:[Object(w.jsxs)("div",{className:"form-summary-element",children:[Object(w.jsx)("p",{children:Object(w.jsx)("span",{children:"Plan name:"})}),Object(w.jsx)("p",{className:"text-end",children:G})]}),Object(w.jsxs)("div",{className:"form-summary-element",children:[Object(w.jsx)("p",{children:Object(w.jsx)("span",{children:"Annual saving:"})}),Object(w.jsxs)("p",{className:"text-end",children:[Object(w.jsx)("span",{children:"\xa3"}),148]})]}),Object(w.jsxs)("div",{className:"form-summary-element",children:[Object(w.jsx)("p",{children:Object(w.jsx)("span",{children:"Early exit fee:"})}),Object(w.jsxs)("p",{className:"text-end",children:[Object(w.jsx)("span",{children:"\xa3"}),L]})]}),Object(w.jsxs)("div",{className:"form-summary-element",children:[Object(w.jsx)("p",{children:Object(w.jsx)("span",{children:"Contract length:"})}),Object(w.jsxs)("p",{className:"text-end",children:[24," months"]})]}),Object(w.jsxs)("div",{className:"form-summary-element",children:[Object(w.jsx)("p",{children:Object(w.jsx)("span",{children:"Monthly direct debit:"})}),Object(w.jsxs)("p",{className:"text-end",children:[Object(w.jsx)("span",{children:"\xa3"}),V]})]}),Object(w.jsxs)("div",{className:"form-summary-element",children:[Object(w.jsx)("p",{children:Object(w.jsx)("span",{children:"Existing debt:"})}),Object(w.jsx)("p",{className:"text-end",children:M?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{children:"\xa3"}),R]}):"N/A"})]})]})]})]})]})})})}},84:function(e,t,s){"use strict";s(85);var n=s(6);t.a=function(e){var t=e.message;return Object(n.jsx)("div",{"data-cy":"error",className:"error-container",id:"error",children:Object(n.jsx)("div",{className:"error-message",children:Object(n.jsx)("p",{className:"error-text",children:t})})})}},85:function(e,t,s){}}]);
//# sourceMappingURL=20.689dfb51.chunk.js.map