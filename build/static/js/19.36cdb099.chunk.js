(this["webpackJsonpinbound-sales-portal"]=this["webpackJsonpinbound-sales-portal"]||[]).push([[19],{129:function(e,t,s){},156:function(e,t,s){"use strict";s.r(t);var a=s(18),n=s.n(a),c=s(23),r=s(38),i=s(37),l=s(27),o=s(2),d=(s(129),s(0)),m=s(86),b=s(84),j=s.p+"static/media/bank_details.4ef05c56.svg",u=s(6);t.default=function(e){var t=e.customerInformation,s=e.progressBar,a=e.updateCustomerInformation,h=e.updateShowFormDetails,p=e.updateShowFormBankDetails,x=e.updateProgressBar,O=e.updateShowFormRating,f=e.updateShowOverlay;Object(o.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[]);var v=Object(o.useState)(!1),g=Object(l.a)(v,2),k=g[0],y=g[1],N=Object(o.useState)({message:""}),_=Object(l.a)(N,2),D=_[0],w=_[1],C=t.customerAddres,P=C.doornumber,S=C.addressline1,A=C.addressline2,F=C.city,E=C.postcode,T=t.switching_details.supplier_selected,q=T.tariff_name,B=T.exit_fees,I=t.customerDetails,z=I.first_name,L=I.last_name,J=I.email,V=I.phone;Object(o.useEffect)((function(){if(k){document.querySelector("#error").scrollIntoView({behavior:"smooth",block:"end",inline:"end"})}}),[k]);var G=function(e){y(!1),console.log("handleChange"),a(Object(i.a)(Object(i.a)({},t),{},{bankDetails:Object(i.a)(Object(i.a)({},t.bankDetails),{},Object(r.a)({},e.target.name,e.target.value))}))},H=function(){var e=Object(c.a)(n.a.mark((function e(a){var c,r,l,o,d,m,b,j,u,h,v,g,k,N,_,C,P,S,A,F,E,T,q,B,I,z,L,J,V,G,H;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),c=t.bankDetails,r=c.account_holder,l=c.account_number,o=c.sort_code,r&&l&&o){e.next=6;break}return w(Object(i.a)(Object(i.a)({},D),{},{message:"All fields are required"})),y(!0),e.abrupt("return");case 6:if(!(l.length<8)){e.next=11;break}return w(Object(i.a)(Object(i.a)({},D),{},{message:"Please verify the account number"})),y(!0),e.abrupt("return");case 11:if(!(o.length<6)){e.next=16;break}return w(Object(i.a)(Object(i.a)({},D),{},{message:"Please verify the sort code"})),y(!0),e.abrupt("return");case 16:return y(!1),f(!0),d=t.agent,m=t.customerDetails,b=m.phone,j=m.first_name,u=m.last_name,h=m.email,v=t.debt,g=v.debt_apply,k=v.debt_amount,N=t.customerAddres,_=N.doornumber,C=N.addressline1,P=N.addressline2,S=N.city,A=N.postcode,F=t.fuel_description,F.same_supplier,E=F.gas_only,T=F.elec_only,q=F.dual_active,B=t.supplierInformation,I=B.electricity_supplier,z=B.gas_supplier,L=t.switching_details.supplier_selected,J=L.tariff_name,V=L.supplier_name,console.log(V),q?G=I.company_name:(T&&(G=I.company_name),E&&(G=z.company_name)),"https://smartdebittestapi.azurewebsites.net/api/HttpTrigger1?method=savingVal",H={fullname:"".concat(j," ").concat(u),phone:b,email:h,doornumber:_,addline1:C.replaceAll(","," -").replace(/\s+/g," "),addline2:P,city:S,postcode:A,vendor:"EDF",plan:J,Existing_debt:g,If_debt_how_much:k,Customer_rating_for_TP:5,Meter_Type:"Legacy PAYG",Select_Provider:V,Existing_Energy_Provider:G,boiler_age:"",boiler_power:"",bank:{account_holder:r,account_number:l,account_sortcode:o},summary:0,authorised_by:d.email,supplier_notes:""},e.next=33,fetch("https://smartdebittestapi.azurewebsites.net/api/HttpTrigger1?method=savingVal",{method:"POST",body:JSON.stringify(H),headers:{"Content-Type":"application/json"}}).then((function(e){return 200!==e.status?Promise.reject(e.json()):e.json()})).then((function(e){if(console.log(e),"success"!==e.status){var t=e.message.error;return w(Object(i.a)(Object(i.a)({},D),{},{message:t||"Please check your bank details"})),void y(!0)}return p(!1),x(Object(i.a)(Object(i.a)({},s),{},{step:10})),O(!0),console.log("dispatchSwitching"),e})).catch((function(e){console.error("Catch an error fetching to postcoder ".concat(e)),w(Object(i.a)(Object(i.a)({},D),{},{message:"We can not connect to smart debit, please try again"})),y(!0)}));case 33:return f(!1),e.abrupt("return");case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("section",{className:"form-bank-details-section",children:Object(u.jsxs)("div",{className:"form-bank-details-container",children:[Object(u.jsxs)("div",{className:"form-bank-details-content",children:[Object(u.jsxs)("div",{className:"form-bank-details",children:[Object(u.jsx)("h1",{children:"Bank Details"}),Object(u.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Nostrum dicta libero tenetur commodi id? Eius aperiam illo voluptatem fuga nobis nulla vitae obcaecati. Rerum doloribus veniam accusamus ad quibusdam sequi!"})]}),Object(u.jsxs)("form",{className:"form-bank-details-input-container",onSubmit:function(e){return H(e)},children:[Object(u.jsxs)("div",{className:"form-bank-details-split-content",children:[Object(u.jsxs)("div",{className:"form-bank-details-input-content",style:k?{marginBottom:"1rem"}:null,children:[Object(u.jsxs)("div",{className:"form-bank-details-input-element",children:[Object(u.jsxs)("label",{htmlFor:"acch",children:["Account holder",Object(u.jsx)("span",{children:"*"})]}),Object(u.jsx)("input",{type:"text",id:"acch",name:"account_holder",onChange:G,required:!0,maxLength:"18",placeholder:"Introduce account holder",value:t.bankDetails.account_holder.replace(/[^a-zA-Z ]/g,"").toUpperCase()||""}),Object(u.jsx)("p",{children:"18 characters max"})]}),Object(u.jsxs)("div",{className:"form-bank-details-input-element",children:[Object(u.jsxs)("label",{htmlFor:"accn",children:["Account number",Object(u.jsx)("span",{children:"*"})]}),Object(u.jsx)("input",{type:"text",id:"accn",name:"account_number",onChange:G,required:!0,maxLength:"8",placeholder:"12345678",value:t.bankDetails.account_number.replace(/[^0-9.]/g,"").trim()||""})]}),Object(u.jsxs)("div",{className:"form-bank-details-input-element",style:k?{marginBottom:"0"}:null,children:[Object(u.jsxs)("label",{htmlFor:"sc",children:["Sort code",Object(u.jsx)("span",{children:"*"})]}),Object(u.jsx)("input",{type:"text",id:"sc",name:"sort_code",onChange:G,required:!0,maxLength:"6",placeholder:"123456",value:t.bankDetails.sort_code.replace(/[^0-9.]/g,"").trim()||""})]})]}),Object(u.jsx)("div",{className:"form-bank-details-img-content",children:Object(u.jsx)("img",{src:j,alt:"Bank Details"})})]}),k?Object(u.jsx)(b.a,{message:D.message}):null,Object(u.jsxs)("div",{className:"form-bank-details-btn-container",children:[Object(u.jsxs)("button",{className:"form-bank-details-btn btn-back",onClick:function(e){return function(e){e.preventDefault();var n=Object(i.a)({},t);delete n.bankDetails,a(Object(i.a)({},n)),y(!1),p(!1),h(!0),x(Object(i.a)(Object(i.a)({},s),{},{step:9})),console.log("goToCustomerDetails")}(e)},children:[Object(u.jsx)(d.b.Provider,{value:{color:"#D338AE",size:"35px"},children:Object(u.jsx)(m.b,{className:"icon-back"})}),"Go back"]}),Object(u.jsxs)("button",{"data-cy":"addrtyped-continue",className:"form-bank-details-btn btn-next",children:["Continue",Object(u.jsx)(d.b.Provider,{value:{color:"#FFF",size:"35px"},children:Object(u.jsx)(m.c,{className:"icon-next"})})]})]})]})]}),Object(u.jsxs)("div",{className:"form-summary-bank-container",children:[Object(u.jsx)("h1",{children:"Summary"}),Object(u.jsxs)("div",{className:"form-summary-bank-section",children:[Object(u.jsx)("h2",{children:"Customer Information"}),Object(u.jsxs)("div",{className:"form-summary-bank-content",children:[Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Full name:"})}),Object(u.jsx)("p",{className:"text-end",children:"".concat(z," ").concat(L)})]}),Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Email:"})}),Object(u.jsx)("p",{className:"text-end",children:J})]}),Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Phone:"})}),Object(u.jsx)("p",{className:"text-end",children:V})]}),Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Door number:"})}),Object(u.jsx)("p",{className:"text-end",children:P})]}),Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Address line 1:"})}),Object(u.jsx)("p",{className:"text-end",children:S})]}),Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Address line 2:"})}),Object(u.jsx)("p",{className:"text-end",children:A})]}),Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"City:"})}),Object(u.jsx)("p",{className:"text-end",children:F})]}),Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Postcode:"})}),Object(u.jsx)("p",{className:"text-end",children:E})]})]})]}),Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"form-summary-bank-section",children:[Object(u.jsx)("h2",{children:"About your chosen plan"}),Object(u.jsxs)("div",{className:"form-summary-bank-content",children:[Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Plan name:"})}),Object(u.jsx)("p",{className:"text-end",children:q})]}),Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Annual saving:"})}),Object(u.jsxs)("p",{className:"text-end",children:[Object(u.jsx)("span",{children:"\xa3"}),148]})]}),Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Early exit fee:"})}),Object(u.jsxs)("p",{className:"text-end",children:[Object(u.jsx)("span",{children:"\xa3"}),B]})]}),Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Contract lenght:"})}),Object(u.jsxs)("p",{className:"text-end",children:[24," months"]})]}),Object(u.jsxs)("div",{className:"form-summary-bank-element",children:[Object(u.jsx)("p",{children:Object(u.jsx)("span",{children:"Monthly direct debit:"})}),Object(u.jsxs)("p",{className:"text-end",children:[Object(u.jsx)("span",{children:"\xa3"}),"31.76"]})]})]})]})]})]})})})}},84:function(e,t,s){"use strict";s(85);var a=s(6);t.a=function(e){var t=e.message;return Object(a.jsx)("div",{"data-cy":"error",className:"error-container",id:"error",children:Object(a.jsx)("div",{className:"error-message",children:Object(a.jsx)("p",{className:"error-text",children:t})})})}},85:function(e,t,s){}}]);
//# sourceMappingURL=19.36cdb099.chunk.js.map